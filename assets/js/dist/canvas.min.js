!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=24)}([,function(e,t){var i=Marionette.CompositeView.extend({behaviors:{Container:{},Draggable:{},Droppable:{},Editable:{},Movable:{}},modelEvents:{"change:atts":"onChangeAttributes","change:order":"onChangeOrder","change:parent":"onChangeParent","change:setting":"onChangeSetting"},childEvents:{"before:element:ready":"beforeChildElementReady","element:ready":"childElementReady","before:element:refresh":"beforeChildElementRefreshed","element:refresh":"childElementRefreshed","before:element:jsRefresh":"beforeChildElementJSRefreshed","element:jsRefresh":"childElementJSRefreshed","element:change:parent":"childElementChangeParent","element:change:order":"childElementChangeOrder","before:element:destroy":"beforeChildElementDestroyed","element:destroy":"childElementDestroyed"},events:{"before:element:ready":"stopEventPropagation","element:ready":"stopEventPropagation","before:element:refresh":"stopEventPropagation","element:refresh":"stopEventPropagation","before:element:copy":"stopEventPropagation","element:copy":"stopEventPropagation","element:child:change:parent":"onDescendantChangeParent","element:child:change:order":"onDescendantChangeOrder","before:element:destroy":"stopEventPropagation","element:destroy":"stopEventPropagation","element:child:add":"onDescendantAdded","element:child:remove":"onDescendantRemoved","before:element:child:ready":"onBeforeDescendantReady","element:child:ready":"onDescendantReady","before:element:child:refresh":"onBeforeDescendantRefreshed","element:child:refresh":"onDescendantRefreshed","before:element:child:jsRefresh":"onBeforeDescendantJSRefreshed","element:child:jsRefresh":"onDescendantJSRefreshed","before:element:child:destroy":"onBeforeDescendantDestroyed","element:child:destroy":"onDescendantDestroyed","before:navigation:reorder":"stopEventPropagation","navigation:reorder":"onReorder"},onReorder:function(e,t,i,n){var o=this.children.findByModelCid(t),r=this.children.find((function(e){return e.model.get("order")==i}));n-i<0?o.$el.insertAfter(r.$el):o.$el.insertBefore(r.$el),this.children.each((function(e){var t=e.$el.index();e._index=t,e.model.set("order",t)})),o.model.collection.sort(),e.stopPropagation()},onChangeAttributes:_.debounce((function(e,t){(e=this.model.toJSON()).atts=t||{};var i=this;i.el.classList.add("is-rendering"),window.ajax.send("tailor_render",{data:{model:JSON.stringify(e),nonce:window._nonces.render},success:function(e){i.updateTemplate(e.html);var t=i.model.get("id");app.channel.trigger("css:update",t,e.css)},error:function(e){i.updateTemplate('<p class="tailor-notification tailor-notification--error">The template for '+i.cid+" could not be refreshed</p>"),console.error(e)},complete:function(){var t=i.$el.hasClass("is-editing"),n=i.$el.hasClass("is-selected");i.$el.removeClass("is-rendering"),i.triggerAll("before:element:refresh",i,e.atts),i.renderTemplate(),i.triggerAll("element:refresh",i,e.atts),t&&i.$el.addClass("is-editing"),n&&i.$el.addClass("is-selected")}})}),250),onChangeOrder:function(){this.triggerAll("element:change:order",this)},onChangeParent:function(){this.triggerAll("element:change:parent",this)},onChangeSetting:function(e,t){t&&(this.triggerAll("before:element:jsRefresh",this,this.model.get("atts")),app.channel.trigger("element:setting:change",e,this),this.triggerAll("element:jsRefresh",this,this.model.get("atts")))},initialize:function(){this._isReady=!1,this._isBeingDestroyed=!1,this.options.childViewContainer=this.model.get("child_container")||null,this.addEventListeners()},addEventListeners:function(){this.listenTo(app.channel,"before:elements:restore",this.onBeforeDestroy)},getChildView:function(e){return Tailor.lookup(e.get("tag"),e.get("type"),"Views")},buildChildView:function(e,t,i){return new t(_.extend({model:e,collection:this.collection},i))},filter:function(e,t,i){return e.get("parent")===this.model.get("id")},attachElContent:function(e){var t=jQuery(e);return this.$el.replaceWith(t),this.setElement(t),this.el.setAttribute("draggable",!0),this.el.setAttribute("tailor-label",this.model.get("label")),this.el.classList.add("tailor-"+this.model.cid),this.el.title=_l10n.edit_element,this},getTemplateId:function(){return"tmpl-tailor-"+this.model.get("id")},getTemplate:function(){var e,t=document.querySelector("#"+this.getTemplateId());return t?(e=_.template(t.innerHTML),t.parentElement.removeChild(t)):(t=document.querySelector("#tmpl-tailor-"+this.model.get("tag")+"-default"),e=_.template(t.innerHTML)),e},updateTemplate:function(e){var t=this.getTemplateId(),i=document.querySelector("#"+t);i||((i=document.createElement("script")).setAttribute("type","text/html"),i.id=t,document.body.appendChild(i)),i.innerHTML=e},renderTemplate:function(){this._ensureViewIsIntact();var e=this.getChildViewContainer(this),t=e.contents().detach();return this.resetChildViewContainer(),this._renderTemplate(),(e=this.getChildViewContainer(this)).append(t),this},onBeforeRender:function(){this.triggerAll("before:element:ready",this)},onDomRefresh:function(){this.$el.find("a").attr({draggable:!1,target:"_blank"}),this.$el.find("img").attr({draggable:!1})},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this)},onDestroy:function(){this.triggerAll("element:destroy",this)},beforeChildElementReady:function(e){this._isReady&&this.children.contains(e)&&this.triggerAll("before:element:child:ready",e)},childElementReady:function(e){if(this.children.contains(e))if(this._isReady)this.triggerAll("element:child:ready",e);else{var t=this.children.filter((function(e){return e._isReady})).length;this.children.length==t&&(this._isReady=!0,this.triggerAll("element:ready",this))}},beforeChildElementRefreshed:function(e){this.children.contains(e)&&this.triggerAll("before:element:child:refresh",e)},childElementRefreshed:function(e){this.children.contains(e)&&this.triggerAll("element:child:refresh",e)},beforeChildElementJSRefreshed:function(e){this.children.contains(e)&&this.triggerAll("before:element:child:jsRefresh",e)},childElementJSRefreshed:function(e){this.children.contains(e)&&this.triggerAll("element:child:jsRefresh",e)},childElementChangeOrder:function(e){this.children.contains(e)&&this.triggerAll("element:child:change:order",e)},childElementChangeParent:function(e){this.children.contains(e)&&this.triggerAll("element:child:change:parent",e)},beforeChildElementDestroyed:function(e){this._isBeingDestroyed||this.triggerAll("before:element:child:destroy",e)},childElementDestroyed:function(e){this._isBeingDestroyed||this.triggerAll("element:child:destroy",e)},onDescendantAdded:function(e,t){this.triggerAll("element:descendant:add",t),e.stopPropagation()},onDescendantRemoved:function(e,t){this.triggerAll("element:descendant:remove",t),e.stopPropagation()},onBeforeDescendantReady:function(e,t){this.triggerAll("before:element:descendant:ready",t),e.stopPropagation()},onDescendantReady:function(e,t){this.triggerAll("element:descendant:ready",t),e.stopPropagation()},onBeforeDescendantRefreshed:function(e,t){this.triggerAll("before:element:descendant:refresh",t),e.stopPropagation()},onDescendantRefreshed:function(e,t){this.triggerAll("element:descendant:refresh",t),e.stopPropagation()},onBeforeDescendantJSRefreshed:function(e,t){this.triggerAll("before:element:descendant:jsRefresh",t),e.stopPropagation()},onDescendantJSRefreshed:function(e,t){this.triggerAll("element:descendant:jsRefresh",t),e.stopPropagation()},onDescendantChangeOrder:function(e,t){this.triggerAll("element:descendant:change:order",t),e.stopPropagation()},onDescendantChangeParent:function(e,t){this.triggerAll("element:descendant:change:parent",t),e.stopPropagation()},onBeforeDescendantDestroyed:function(e,t){this.triggerAll("before:element:descendant:destroy",t),e.stopPropagation()},onDescendantDestroyed:function(e,t){this.triggerAll("element:descendant:destroy",t),e.stopPropagation()},stopEventPropagation:function(e){e.stopPropagation()},triggerAll:function(e,t,i){this.$el.trigger(e,t),this.triggerMethod(e,t),i?app.channel.trigger(e,this,i):app.channel.trigger(e,this)},_updateIndices:function(e,t,i){t&&(e._index=i,e.model._changing=!1,e.model.set("order",i)),this.children.each((function(i){i._index>=e._index&&(i._index+=t?1:-1,i.model.set("order",i._index))}),this)}});e.exports=i},function(e,t){!function(e){"use strict";var t=document.createElement("fakeelement");e.animationEndName=function(){var e,i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(i.hasOwnProperty(e)&&void 0!==t.style[e])return i[e];return!1}(),e.transitionEndName=function(){var e,i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(i.hasOwnProperty(e)&&void 0!==t.style[e])return i[e];return!1}()}(window)},function(e,t){!function(){if(void 0!==window.Element&&!("classList"in document.documentElement)){var e,t,i,n=Array.prototype,o=n.push,r=n.splice,a=n.join;s.prototype={add:function(e){this.contains(e)||(o.call(this,e),this.el.className=this.toString())},contains:function(e){return-1!=this.el.className.indexOf(e)},item:function(e){return this[e]||null},remove:function(e){if(this.contains(e)){for(var t=0;t<this.length&&this[t]!=e;t++);r.call(this,t,1),this.el.className=this.toString()}},toString:function(){return a.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},window.DOMTokenList=s,e=Element.prototype,t="classList",i=function(){return new s(this)},Object.defineProperty?Object.defineProperty(e,t,{get:i}):e.__defineGetter__(t,i)}function s(e){this.el=e;for(var t=e.className.replace(/^\s+|\s+$/g,"").split(/\s+/),i=0;i<t.length;i++)o.call(this,t[i])}}()},function(e,t){!function(e){"use strict";for(var t=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!e.requestAnimationFrame;++n)e.requestAnimationFrame=e[i[n]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[n]+"CancelAnimationFrame"]||e[i[n]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(i,n){var o=(new Date).getTime(),r=Math.max(0,16-(o-t)),a=e.setTimeout((function(){i(o+r)}),r);return t=o+r,a}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)})}(window)},function(e,t){var i,n=jQuery;i={url:window.ajaxurl,post:function(e,t){return ajax.send({data:_.isObject(e)?e:_.extend(t||{},{action:e})})},send:function(e,t){return _.isObject(e)?t=e:(t=t||{}).data=_.extend(t.data||{},{action:e,tailor:1}),t=_.defaults(t||{},{type:"POST",url:ajax.url,context:this}),n.Deferred((function(e){t.success&&e.done(t.success);var i=t.error?t.error:ajax.onError;e.fail(i),delete t.success,delete t.error,n.ajax(t).done((function(t){"1"!==t&&1!==t||(t={success:!0}),_.isObject(t)&&!_.isUndefined(t.success)?e[t.success?"resolveWith":"rejectWith"](this,[t.data]):e.rejectWith(this,[t])})).fail((function(){e.rejectWith(this,arguments)}))})).promise()},onError:function(e){Tailor.Notify?e&&e.hasOwnProperty("message")?Tailor.Notify(e.message):"0"==e?Tailor.Notify(window._l10n.expired):"-1"==e?Tailor.Notify(window._l10n.invalid):Tailor.Notify(window._l10n.error):console.error(e)}},window.ajax=i,e.exports=i},function(e,t,i){var n;n=i(17).extend({validTarget:function(e,t){if("child"==e.get("type")||_.contains(["tailor_section","tailor_column"],e.get("tag")))return!1;var i=this.collection.getParent(this);return"tailor_row"==e.get("tag")?"tailor_section"==i.get("tag")&&_.contains(["top","bottom"],t):"center"==t?"container"!=e.get("type"):_.contains(["wrapper","child"],i.get("type"))?_.contains(["top","bottom"],t)?_.contains(["tailor_section","tailor_column"],i.get("tag"))||!_.contains(["container","wrapper","child"],e.get("type")):"tailor_section"==i.get("tag")||!_.contains(["left","right"],t):"container"!=e.get("type")},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.columnBefore),this.listenTo(this,"element:move:right",this.columnAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyColumnBefore),this.listenTo(this,"element:copy:right",this.copyColumnAfter)}}),e.exports=n},function(e,t){var i=Marionette.Behavior.extend({events:{dragstart:"onDragStart",dragend:"onDragEnd",drag:"onDrag"},onDragStart:function(e){app.channel.trigger("canvas:dragstart",e.originalEvent,this.view)},onDrag:function(e){app.channel.trigger("canvas:drag",e.originalEvent,this.view)},onDragEnd:function(e){app.channel.trigger("canvas:dragend",e.originalEvent,this.view)}});e.exports=i},function(e,t){var i,n=window.jQuery,o=n(window),r=n(document),a=0;(i=function(e,t,i){this.id="tailor"+a++,this.el=e,this.$el=n(this.el),this.callbacks=n.extend({},this.callbacks,i),this.options=n.extend({},this.getDefaults(),this.$el.data(),t),document.documentElement.dir&&"rtl"==document.documentElement.dir&&(this.options.rtl=!0),this.initialize()}).prototype={callbacks:{onInitialize:function(){},onDestroy:function(){}},getDefaults:function(){return{}},initialize:function(){this.addEventListeners(),this.onInitialize(),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){var e=this;this.onResizeCallback=_.throttle(this.onResize.bind(this),100),this.$el.on("before:element:ready."+e.id,(function(t,i){t.target==e.el&&e.onBeforeReady(t,i)})).on("element:ready."+e.id,(function(t,i){t.target==e.el&&e.onReady(t,i)})),this.$el.on("element:change:order."+e.id+" element:change:parent."+e.id,(function(t,i){t.target==e.el&&e.onMove(t,i)})),this.$el.on("before:element:copy."+e.id,(function(t,i){t.target==e.el&&e.onBeforeCopy(t,i)})).on("element:copy."+e.id,(function(t,i){t.target==e.el&&e.onCopy(t,i)})),this.$el.on("before:element:refresh."+e.id,(function(t,i){t.target==e.el&&(e.destroy(),e.onBeforeRefresh(t,i))})),this.$el.on("before:element:jsRefresh."+e.id,(function(t,i){t.target==e.el&&e.onBeforeJSRefresh(t,i)})).on("element:jsRefresh."+e.id,(function(t,i){t.target==e.el&&e.onJSRefresh(t,i)})),this.$el.on("before:element:destroy."+e.id,(function(t,i){t.target==e.el&&e.onBeforeDestroy(t,i)})).on("element:destroy."+e.id,(function(t,i){t.target==e.el&&e.destroy()})),this.$el.on("element:child:add."+e.id,(function(t,i){t.target==e.el&&e.onAddChild(t,i)})),this.$el.on("element:child:remove."+e.id,(function(t,i){t.target==e.el&&e.onRemoveChild(t,i)})),this.$el.on("before:element:child:ready."+e.id,(function(t,i){e.onBeforeReadyChild(t,i)})).on("element:child:ready."+e.id,(function(t,i){e.onReadyChild(t,i)})),this.$el.on("element:child:change:order."+e.id+" element:child:change:parent."+e.id,(function(t,i){e.onMoveChild(t,i)})),this.$el.on("before:navigation:reorder."+e.id,(function(t,i,n,o){e.onBeforeReorderChild(t,i,n,o)})).on("navigation:reorder."+e.id,(function(t,i,n,o){e.onReorderChild(t,i,n,o),e.onReorderChild(t,i,n,o)})),this.$el.on("before:element:child:refresh."+e.id,(function(t,i){e.onBeforeRefreshChild(t,i)})).on("element:child:refresh."+e.id,(function(t,i){e.onRefreshChild(t,i)})),this.$el.on("before:element:child:jsRefresh."+e.id,(function(t,i){e.onBeforeJSRefreshChild(t,i)})).on("element:child:jsRefresh."+e.id,(function(t,i){e.onJSRefreshChild(t,i)})),this.$el.on("before:element:child:destroy."+e.id,(function(t,i){e.onBeforeDestroyChild(t,i)})).on("element:child:destroy."+e.id,(function(t,i){e.onDestroyChild(t,i)})),this.$el.on("element:child:add."+e.id+" element:child:remove."+e.id+" element:child:ready."+e.id+" element:child:refresh."+e.id+" element:child:jsRefresh."+e.id+" element:child:destroy."+e.id,(function(t,i){e.onChangeChild(t,i)})),this.$el.on("element:descendant:add."+e.id,(function(t,i){t.target!=e.el&&e.onAddDescendant(t,i)})),this.$el.on("element:descendant:remove."+e.id,(function(t,i){t.target!=e.el&&e.onRemoveDescendant(t,i)})),this.$el.on("before:element:descendant:ready."+e.id,(function(t,i){t.target!=e.el&&e.onBeforeReadyDescendant(t,i)})).on("element:descendant:ready."+e.id,(function(t,i){t.target!=e.el&&e.onReadyDescendant(t,i)})),this.$el.on("before:element:descendant:refresh."+e.id,(function(t,i){t.target!=e.el&&e.onBeforeRefreshDescendant(t,i)})).on("element:descendant:refresh."+e.id,(function(t,i){t.target!=e.el&&e.onRefreshDescendant(t,i)})),this.$el.on("before:element:descendant:jsRefresh."+e.id,(function(t,i){t.target!=e.el&&e.onBeforeJSRefreshDescendant(t,i)})).on("element:descendant:jsRefresh."+e.id,(function(t,i){t.target!=e.el&&e.onJSRefreshDescendant(t,i)})),this.$el.on("before:element:descendant:destroy."+e.id,(function(t,i){t.target!=e.el&&e.onBeforeDestroyDescendant(t,i)})).on("element:descendant:destroy."+e.id,(function(t,i){t.target!=e.el&&e.onDestroyDescendant(t,i)})),this.$el.on("element:descendant:add."+e.id+" element:descendant:remove."+e.id+" element:descendant:ready."+e.id+" element:descendant:refresh."+e.id+" element:descendant:jsRefresh."+e.id+" element:descendant:destroy."+e.id,(function(t,i){e.onChangeDescendant(t,i)})),r.on("element:descendant:add."+e.id+" element:descendant:remove."+e.id+" element:descendant:ready."+e.id+" element:descendant:destroy."+e.id,(function(t,i){t.target.contains(e.el)&&t.target!=e.el&&i.el!=e.el&&e.onChangeParent()})).on("element:refresh."+e.id+" element:jsRefresh."+e.id+" element:descendant:refresh."+e.id+" element:descendant:jsRefresh."+e.id,(function(t,i){t.target.contains(e.el)&&t.target!=e.el&&i.el!=e.el&&e.onChangeParent()})),o.on("resize."+e.id,e.onResizeCallback)},removeEventListeners:function(){this.$el.off("."+this.id),o.off("resize."+this.id,this.onResizeCallback)},onInitialize:function(){},onBeforeReady:function(e,t){},onReady:function(e,t){},onMove:function(e,t){},onBeforeCopy:function(e,t){},onCopy:function(e,t){},onBeforeRefresh:function(e,t){},onBeforeJSRefresh:function(e,t){},onJSRefresh:function(e,t){},onBeforeDestroy:function(e,t){},destroy:function(){this.removeEventListeners(),this.onDestroy(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)},onDestroy:function(){},onAddChild:function(e,t){},onRemoveChild:function(e,t){},onBeforeReadyChild:function(e,t){},onReadyChild:function(e,t){},onMoveChild:function(e,t){},onBeforeReorderChild:function(e,t,i){},onReorderChild:function(e,t,i){},onBeforeRefreshChild:function(e,t){},onRefreshChild:function(e,t){},onBeforeJSRefreshChild:function(e,t){},onJSRefreshChild:function(e,t){},onBeforeDestroyChild:function(e,t){},onDestroyChild:function(e,t){},onChangeChild:function(e,t){},onAddDescendant:function(e,t){},onRemoveDescendant:function(e,t){},onBeforeReadyDescendant:function(e,t){},onReadyDescendant:function(e,t){},onBeforeRefreshDescendant:function(e,t){},onRefreshDescendant:function(e,t){},onBeforeJSRefreshDescendant:function(e,t){},onJSRefreshDescendant:function(e,t){},onBeforeDestroyDescendant:function(e,t){},onDestroyDescendant:function(e,t){},onChangeDescendant:function(e,t){},onChangeParent:function(){},onResize:function(e,t){}},e.exports=i},function(e,t){var i,n=(0,window.jQuery)(window),o=window.app,r={sidebar:[],element:[]};function a(e){return e&&_.contains(_.keys(i.stylesheets),e)||(e="all"),e}o.listenTo(o.channel,"sidebar:setting:change",(function(e){var t=e.get("id");_.isEmpty(r.sidebar[t])||(_.each(r.sidebar[t],(function(t){t.apply(window,[e.get("value"),e.previous("value")])})),n.trigger("resize"))})),o.listenTo(o.channel,"element:setting:change",(function(e,t){var n=t.model.get("id"),o=e.get("id");if(r.element.hasOwnProperty(o)&&0!=r.element[o].length){1==r.element[o].length&&i.deleteRules(n,o);var s,l={};_.each(r.element[o],(function(r){if("function"==typeof r)if(!1===(s=r.apply(t,[e.get("value"),e.previous("value"),t.model])))t.model.trigger("change:atts",t.model,t.model.get("atts"));else if(_.isArray(s)&&s.length>0){for(var d in s)if(s.hasOwnProperty(d)){if(!s[d].hasOwnProperty("selectors")||!s[d].hasOwnProperty("declarations"))continue;var c=a(s[d].media);l[c]=l[c]||{},l[c][n]=l[c][n]||[],_.keys(s[d].declarations).length>0&&l[c][n].push({selectors:s[d].selectors,declarations:s[d].declarations,setting:s[d].setting||o})}i.addRules(l)}}))}})),o.channel.on("module:css:stylesheets:ready",(function(e){i=e})),e.exports={onChange:function(e,t){var i=e.split(":");i.length>=2&&_.contains(["sidebar","element"],i[0])&&function(e,t,i){"function"==typeof i&&(r[e][t]=r[e][t]||[],r[e][t].push(i))}(i[0],i[1],t)}}},function(e,t){var i,n=window.jQuery,o=window.Tailor.Components;i=o.create({getDefaults:function(){return{type:"image",delegate:".is-lightbox-image",closeMarkup:'<button title="%title%" type="button" class="not-a-button mfp-close">&#215;</button>',gallery:{enabled:!0,arrowMarkup:'<button title="%title%" type="button" class="not-a-button mfp-arrow mfp-arrow-%dir%"></button>'},image:{titleSrc:function(e){return e.el.find("figcaption").text()}}}},onInitialize:function(){this.magnificPopup()},magnificPopup:function(){this.$el.magnificPopup(this.options)}}),n.fn.tailorLightbox=function(e,t){return this.each((function(){n.data(this,"tailorLightbox")||n.data(this,"tailorLightbox",new i(this,e,t))}))},e.exports=i},function(e,t){var i,n=window.jQuery,o=window.Tailor.Components;i=o.create({getDefaults:function(){return{height:450,address:"",latitude:"",longitude:"",zoom:12,draggable:1,scrollwheel:0,controls:0,hue:null,saturation:0}},getStyles:function(e,t){return[{featureType:"all",elementType:"all",stylers:[{saturation:e||null},{hue:t||null}]},{featureType:"water",elementType:"all",stylers:[{hue:t||null},{saturation:e||null},{lightness:50}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"simplified"}]}]},onInitialize:function(){var e=this;this.markers=[],this.infoWindows=[],this.$canvas=this.$el.find(".tailor-map__canvas").height(this.options.height),this.getCoordinates(this.options).then((function(t){e.center=t;var i=e.options.controls,n={zoom:e.options.zoom,draggable:e.options.draggable,scrollwheel:e.options.scrollwheel,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!i,panControl:i,rotateControl:i,scaleControl:i,zoomControl:i,mapTypeControl:i,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_CENTER}},o=e.getStyles(e.options.saturation,e.options.hue);e.map=new google.maps.Map(e.$canvas[0],n),e.map.mapTypes.set("map_style",new google.maps.StyledMapType(o,{name:"Styled Map"})),e.map.setMapTypeId("map_style"),e.setupMarkers(e.$el,e.map)}))},getCoordinates:function(e){return n.Deferred((function(t){if("undefined"==typeof google)t.reject(new Error("The Google Maps API is currently unavailable"));else if(""!=e.address){(new google.maps.Geocoder).geocode({address:e.address},(function(i,n){google.maps.GeocoderStatus.OK==n?t.resolve(i[0].geometry.location):e.latitude&&e.longitude?t.resolve(new google.maps.LatLng(e.latitude,e.longitude)):t.reject(new Error(n))}))}else e.latitude&&e.longitude?t.resolve(new google.maps.LatLng(e.latitude,e.longitude)):t.reject(new Error("No address or map coordinates provided"))})).promise()},setupMarkers:function(e,t){var i=this;this.$el.find(".tailor-map__marker").each((function(e,o){var r=_.extend({},{address:"",latitude:"",longitude:"",image:""},n(o).data());i.getCoordinates(r).then((function(n){i.markers[e]=new google.maps.Marker({map:t,position:n,infoWindowIndex:e,icon:r.image}),"null"!=o.innerHTML&&(i.infoWindows[e]=new google.maps.InfoWindow({content:o.innerHTML}),google.maps.event.addListener(i.markers[e],"click",(function(){o.innerHTML&&i.infoWindows[e].open(t,this)})))}))}))},refreshMap:function(){this.map&&(google.maps.event.trigger(this.map,"resize"),this.map.setCenter(this.center))},onMove:function(){this.refreshMap()},onRefresh:function(){this.refreshMap()},onChangeParent:function(){this.refreshMap()},onDestroy:function(){delete this.map,delete this.markers,delete this.infoWindows},onResize:function(){this.refreshMap()}}),n.fn.tailorGoogleMap=function(e,t){return this.each((function(){n.data(this,"tailorGoogleMap")||n.data(this,"tailorGoogleMap",new i(this,e,t))}))},e.exports=i},function(e,t){var i,n=window.jQuery,o=window.Tailor.Components;i=o.create({shuffleActive:!1,getDefaults:function(){return{itemSelector:".tailor-grid__item"}},onInitialize:function(){this.$wrap=this.$el.find(".tailor-grid--masonry"),this.shuffle()},shuffle:function(){var e=this;this.$wrap.imagesLoaded((function(){e.$wrap.shuffle(e.options),e.shuffleActive=!0}))},refreshShuffle:function(){this.$wrap.shuffle("update")},unShuffle:function(){this.$wrap.shuffle("destroy"),this.shuffleActive=!1},onMove:function(){this.shuffleActive&&this.refreshShuffle()},onChangeParent:function(){this.shuffleActive&&this.refreshShuffle()},onDestroy:function(){this.shuffleActive&&this.unShuffle()},onResize:function(){this.shuffleActive&&this.refreshShuffle()}}),n.fn.tailorMasonry=function(e,t){return this.each((function(){n.data(this,"tailorMasonry")||n.data(this,"tailorMasonry",new i(this,e,t))}))},e.exports=i},function(e,t){var i,n=window.jQuery,o=n(window),r=window.Tailor.Components;i=r.create({getDefaults:function(){return{ratio:.25,selector:".tailor-section__background"}},onInitialize:function(){this.position={},this.background=this.el.querySelector(this.options.selector),this.background&&(this.addEvents(),this.refreshParallax())},addEvents:function(){this.onScrollCallback=this.onScroll.bind(this),o.on("scroll."+this.id,this.onScrollCallback)},doSetup:function(){this.windowHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var e=this.el.getBoundingClientRect(),t=this.el.offsetHeight,i=e.top+window.pageYOffset;this.position.top=i,this.position.height=t,this.position.bottom=i+t,this.background.style.bottom="0px",this.background.style.height=Math.round(t+t*this.options.ratio)+"px"},doParallax:function(){if(this.inViewport()){var e=1-(this.position.bottom-window.pageYOffset)/(this.position.height+this.windowHeight),t=Math.round(e*this.position.height*this.options.ratio*100)/100;this.background.style[Modernizr.prefixed("transform")]="translate3d( 0px, "+t+"px, 0px )"}},refreshParallax:function(){this.doSetup(),this.doParallax()},inViewport:function(){var e=window.pageYOffset,t=e+this.windowHeight;return this.position.top<t&&e<this.position.bottom},onJSRefresh:function(){this.refreshParallax()},onChangeChild:function(){this.refreshParallax()},onChangeDescendant:function(){this.refreshParallax()},onResize:function(){this.refreshParallax()},onScroll:function(){requestAnimationFrame(this.doParallax.bind(this))},onDestroy:function(){o.off("scroll."+this.id,this.onScrollCallback),this.background.removeAttribute("style")}}),n.fn.tailorParallax=function(e,t){return this.each((function(){n.data(this,"tailorParallax")||n.data(this,"tailorParallax",new i(this,e,t))}))},e.exports=i},function(e,t){var i,n=window.jQuery,o=window.Tailor.Components;i=o.create({slickActive:!1,getDefaults:function(){return{items:".tailor-slideshow__slide",prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"></button>',adaptiveHeight:!0,draggable:!1,speed:250,slidesToShow:1,slidesToScroll:1,autoplay:!1,autoplaySpeed:3e3,arrows:!1,dots:!1,fade:!0}},onInitialize:function(){this.$wrap=this.$el.find(".tailor-slideshow__slides"),this.slick()},slick:function(){var e=this;this.$el.imagesLoaded((function(){e.$wrap.slick(e.options),e.slickActive=!0}))},refreshSlick:function(){this.slickActive&&this.$wrap.slick("refresh")},unSlick:function(){this.slickActive&&this.$wrap.slick("unslick")},onMove:function(){this.refreshSlick()},onBeforeCopy:function(){this.unSlick()},onChangeParent:function(){this.refreshSlick()},onDestroy:function(){this.unSlick()},onResize:function(){this.refreshSlick()}}),n.fn.tailorSlideshow=function(e,t){return this.each((function(){n.data(this,"tailorSlideshow")||n.data(this,"tailorSlideshow",new i(this,e,t))}))}},function(e,t){var i,n=window.jQuery,o=n(window),r=window.Tailor.Components;i=r.create({getDefaults:function(){return{tabs:".tailor-tabs__navigation .tailor-tabs__navigation-item",content:".tailor-tabs__content .tailor-tab",initial:1}},onInitialize:function(){this.querySelectors(),this.setActive()},querySelectors:function(){this.$tabs&&this.$tabs.off(),this.$content=this.$el.find(this.options.content),this.$tabs=this.$el.find(this.options.tabs).on("click",n.proxy(this.onClick,this))},setActive:function(){var e,t=this.$content.filter((function(){return this.classList.contains("is-active")}));if(0==t.length){var i=this.options.initial-1;this.$content[i]&&(e=this.$content[i])}else e=t[0];e&&this.activate(e.id)},activate:function(e){this.$tabs.each((function(){this.classList.toggle("is-active",this.getAttribute("data-id")==e)})),this.$content.each((function(){n(this).toggle(this.id==e).toggleClass("is-active",this.id==e)})),o.trigger("resize")},refreshTabs:function(e,t){this.querySelectors(),this.activate(t.el.id)},onClick:function(e){this.activate(e.target.getAttribute("data-id")),e.preventDefault()},onDestroy:function(){this.$tabs.off()},onAddChild:function(e,t){this.refreshTabs(e,t)},onReadyChild:function(e,t){this.refreshTabs(e,t)},onRemoveChild:function(e,t){this.refreshTabs(e,t)},onRefreshChild:function(e,t){this.refreshTabs(e,t)},onReorderChild:function(e,t,i,n){this.activate(t)},onDestroyChild:function(e,t){if(0!=t.$el.index()||t.el.nextSibling){var i=t.el.nextSibling?t.el.nextSibling.id:t.el.previousSibling.id;t.$el.remove(),this.querySelectors(),this.activate(i)}}}),n.fn.tailorTabs=function(e,t){return this.each((function(){n.data(this,"tailorTabs")||n.data(this,"tailorTabs",new i(this,e,t))}))},e.exports=i},function(e,t){var i,n=window.jQuery,o=n(window),r=window.Tailor.Components;i=r.create({getDefaults:function(){return{toggles:".tailor-toggle__title",content:".tailor-toggle__body",accordion:!1,initial:0,speed:150}},onInitialize:function(){this.querySelectors();var e=this.options.initial-1;e>=0&&this.$toggles.length>e&&this.activate(this.$toggles[e])},querySelectors:function(){this.$content=this.$el.find(this.options.content).hide(),this.$toggles=this.$el.find(this.options.toggles).off().on("click",n.proxy(this.onClick,this))},activate:function(e){var t=this.options.speed,i=n(e);this.options.accordion?(this.$toggles.filter((function(){return this!==e})).removeClass("is-active"),this.$content.each((function(){var i=n(this);e.nextElementSibling==this?i.slideToggle(t):i.slideUp(t)}))):this.$content.filter((function(){return e.nextElementSibling==this})).slideToggle(t),i.toggleClass("is-active"),o.trigger("resize")},onClick:function(e){this.activate(e.target),e.preventDefault()},onDestroy:function(e){this.$toggles.off()},onChangeChild:function(){this.querySelectors()}}),n.fn.tailorToggles=function(e,t){return this.each((function(){n.data(this,"tailorToggles")||n.data(this,"tailorToggles",new i(this,e,t))}))},e.exports=i},function(e,t,i){var n;n=i(20).extend({cloneContainer:function(e,t,i){var n=this.collection,o=e.model.clone();o.set("id",o.cid),o.set("parent",t),o.set("order",i),this.copy(o.cid,e);var r=this.cloneChildren(e.children,o,[]);n.add(r,{silent:!0}),n.add(o),e.triggerMethod("element:refresh")},cloneChildren:function(e,t,i){return e.length&&e.each((function(e){var n=e.model.clone();n.set("id",n.cid),n.set("parent",t.get("id")),n.copy(n.cid,e),i.push(n),e.children&&this.cloneChildren(e.children,n,i)}),this),i},copyBefore:function(e,t){this.cloneContainer(t,e.model.get("parent"),e.model.get("order")-1)},copyAfter:function(e,t){this.cloneContainer(t,e.model.get("parent"),e.model.get("order"))},copyColumnBefore:function(e,t){var i=e.model.get("parent");if("tailor_column"===e.model.get("tag")){var n=this.collection.createColumn(i,e.model.get("order")-1);this.cloneContainer(t,n.get("id"),0)}else{var o=this.collection.createRow(i,e.model.get("order"));this.collection.insertChild(e.model,_.last(o)),this.cloneContainer(t,_.first(o).get("id"),0)}},copyColumnAfter:function(e,t){var i=e.model.get("parent");if("tailor_column"===e.model.get("tag")){var n=this.collection.createColumn(i,e.model.get("order"));this.cloneContainer(t,n.get("id"),0)}else{var o=this.collection.createRow(i,e.model.get("order"));this.collection.insertChild(e.model,_.first(o)),this.cloneContainer(t,_.last(o).get("id"),0)}},copy:function(e,t){this.beforeCopyElement(e,t),this.createTemplate(e,t),this.afterCopyElement(e,t)},createTemplate:function(e,t){var i=t.el.classList.contains("is-editing");t.$el.removeClass("is-dragging is-hovering is-selected is-editing");var n=t.getChildViewContainer(t),o=n.contents().detach();this.appendTemplate(e,t),n.append(o),i&&t.el.classList.add("is-editing")}}),e.exports=n},function(e,t,i){var n;n=i(17).extend({validTarget:function(e,t){return"tailor_section"!=e.get("tag")&&!_.contains(["left","right","center"],t)&&(this.collection.getParent(this).get("tag")!=e.get("tag")&&e.get("tag")==this.get("tag"))},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.insertBefore),this.listenTo(this,"element:move:right",this.insertAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyBefore),this.listenTo(this,"element:copy:right",this.copyAfter)}}),e.exports=n},function(e,t,i){var n;n=i(17).extend({validTarget:function(e,t){if("child"==e.get("type")||_.contains(["tailor_section","tailor_column"],e.get("tag"))||"center"==t)return!1;var i=this.collection.getParent(this);return"tailor_row"==e.get("tag")?"tailor_section"==i.get("tag")&&_.contains(["top","bottom"],t):"child"==i.get("type")&&"tailor_column"!=i.get("tag")?"container"!=e.get("type")&&!_.contains(["left","right"],t):!_.contains(["container","wrapper","child"],i.get("type"))||("tailor_section"==i.get("tag")||!_.contains(["left","right"],t))},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.columnBefore),this.listenTo(this,"element:move:right",this.columnAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyColumnBefore),this.listenTo(this,"element:copy:right",this.copyColumnAfter),this.listenTo(this,"element:move:center",this.createChild),this.listenTo(this,"element:copy:center",this.copyChild)},createChild:function(e,t){var i=e.model.get("id"),n=e.model.get("child"),o=this.collection.where({parent:i,tag:n}).length;this.createTemplate(t.model.get("id"),t),this.collection.createWrapper(n,i,o,t.model)},copyChild:function(e,t){var i=e.model.get("id"),n=e.model.get("child"),o=this.collection.where({parent:i,tag:n}).length,r=this.collection.createWrapper(n,i,o,!1);this.cloneContainer(t,r.get("id"),0)}}),e.exports=n},function(e,t){var i;Backbone.Model.prototype.set=_.wrap(Backbone.Model.prototype.set,(function(e,t,i,n){if(null==t)return this;var o;"object"==typeof t?(o=t,n=i):(o={})[t]=i,n||(n={});var r=e.call(this,o,n);return this._tracking&&_.each(o,_.bind((function(e,t){_.isEqual(this._original[t],e)?delete this._unsaved[t]:this._unsaved[t]=e}),this)),r})),i=Backbone.Model.extend({_tracking:!1,_original:{},_unsaved:{},defaults:function(){return{id:this.cid,tag:"",label:"",atts:{},parent:"",order:0,collection:"element"}},isTracking:function(){return this._tracking},startTracking:function(){return this._tracking=!0,this.resetTracking(),this},stopTracking:function(){return this._tracking=!1,this._original={},this._unsaved={},this},resetTracking:function(){return this._original=_.clone(this.attributes),this._unsaved={},this},resetAttributes:function(){if(this._tracking)return this.attributes=this._original,this.resetTracking(),this.trigger("change:atts",this,this.get("atts")),this},toShortcode:function(){var e=this.get("tag"),t=this.get("atts"),i="",n="["+e;return _.each(t,(function(e,t){e&&("content"===t?i=e:_.isNumber(t)?/\s/.test(e)?n+=' "'+e+'"':n+=" "+e:n+=" "+t+'="'+e+'"')}),this),n+"]"+i+"[/"+e+"]"},insertBefore:function(e){this.trigger("remove:child"),this.trigger("insert:before",e),this.trigger("add:child"),this.set("parent",e.model.get("parent"))},insertAfter:function(e){this.trigger("remove:child"),this.trigger("insert:after",e),this.trigger("add:child"),this.set("parent",e.model.get("parent"))},columnBefore:function(e){var t=e.model,i=t.get("parent");if("tailor_column"===t.get("tag")){var n=this.collection.createColumn(i,t.get("order")-1);this.collection.insertChild(this,n)}else{var o=this.collection.createRow(i,t.get("order"));this.collection.insertChild(this,_.first(o)),this.collection.insertChild(t,_.last(o))}},columnAfter:function(e){var t=e.model,i=t.get("parent");if("tailor_column"===t.get("tag")){var n=this.collection.createColumn(i,t.get("order"));this.collection.insertChild(this,n)}else{var o=this.collection.createRow(i,t.get("order"));this.collection.insertChild(t,_.first(o)),this.collection.insertChild(this,_.last(o))}},beforeCopyElement:function(e,t){t.triggerAll("before:element:copy",t)},appendTemplate:function(e,t){var i=t.model.get("id"),n=document.createElement("script");n.setAttribute("type","text/html"),n.id="tmpl-tailor-"+e,n.innerHTML=t.el.outerHTML.replace(i,e),document.getElementById("tailor-templates").appendChild(n)},afterCopyElement:function(e,t){var i=t.model.get("id");t.$el.trigger("element:copy",t),app.channel.trigger("css:copy",i,e)}}),e.exports=i},,,,function(e,t,i){!function(e,t){if(null!=document.getElementById("canvas")){i(3),i(4),i(2),i(5),Marionette.Behaviors.behaviorsLookup=function(){return{Container:i(25),Droppable:i(26),Editable:i(27),Movable:i(28),Draggable:i(7)}};var n=i(29);e.app=new n;var o=i(8);e.Tailor={Api:{Setting:i(9),Element:i(30)},CSS:i(31),Models:{},Views:{},Settings:{},Components:{create:function(e){var t=e,i=function(e,t,i){o.call(this,e,t,i)};for(var n in i.prototype=Object.create(o.prototype),t)i.prototype[n]=t[n];return Object.defineProperty(i.prototype,"constructor",{enumerable:!1,value:i}),i}}},e.Tailor.Components.Abstract=o,e.Tailor.Components.Lightbox=i(10),e.Tailor.Components.Map=i(11),e.Tailor.Components.Masonry=i(12),e.Tailor.Components.Parallax=i(13),e.Tailor.Components.Slideshow=i(14),e.Tailor.Components.Tabs=i(15),e.Tailor.Components.Toggles=i(16),e.Tailor.Components.Carousel=i(32),e.Tailor.Components.SimpleCarousel=i(33),app.addRegions({canvasRegion:{selector:"#canvas",regionClass:i(34)},selectRegion:{selector:"#select",regionClass:i(35)}}),i(36),app.on("before:start",(function(){function e(e){return(e=e||"").replace(/_|-|tailor_/gi," ").replace(/(?: |\b)(\w)/g,(function(e){return e.toUpperCase().replace(/\s+/g,"")}))}Tailor.Models.Section=i(40),Tailor.Models.Row=i(41),Tailor.Models.Column=i(42),Tailor.Models.GridItem=i(43),Tailor.Models.Tabs=i(44),Tailor.Models.Carousel=i(45),Tailor.Models.Container=i(6),Tailor.Models.Wrapper=i(19),Tailor.Models.Child=i(18),Tailor.Models.Default=i(46),Tailor.Views.Column=i(47),Tailor.Views.Tab=i(48),Tailor.Views.CarouselItem=i(49),Tailor.Views.Tabs=i(50),Tailor.Views.Carousel=i(53),Tailor.Views.Container=i(1),Tailor.Views.Wrapper=i(1),Tailor.Views.Child=i(1),Tailor.Views.Default=i(56),Tailor.lookup=function(t,i,n){if(Tailor.hasOwnProperty(n)){var o=e(t);return Tailor[n].hasOwnProperty(o)||i&&(o=e(i),Tailor[n].hasOwnProperty(o))?Tailor[n][o]:Tailor[n].Default}console.error("Object type "+n+" does not exist")}})),app.channel.on("sidebar:initialize",(function(){app.module("module:css",i(57)),app.module("module:elements",i(59)),app.module("module:templates",i(61)),app.module("module:canvas",i(62)),app.module("module:tools",i(64)),app.channel.on("module:canvas:ready",(function(){app.channel.trigger("canvas:initialize",app)}))})),t((function(){var t=e.parent.app;t._initialized?r():t.on("start",(function(){r()}))}))}else console.error("The canvas does not exist in the page.  This could be caused by a plugin or theme conflict.");function r(){app.start({elements:e._elements||[],nonces:e._nonces||[],mediaQueries:e._media_queries||{},cssRules:e._css_rules||{}})}}(window,Backbone.$)},function(e,t){var i=Marionette.Behavior.extend({events:{"container:add":"addChildView","container:remove":"removeChildView"},modelEvents:{"container:collapse":"onCollapse"},addChildView:function(e,t){if(t!==this.view){var i=(this.view.$childViewContainer?this.view.$childViewContainer:this.$el).children().filter(":not( .tailor-column__helper )").index(t.$el);this.view._updateIndices(t,!0,i),this.view.proxyChildEvents(t),this.view.children.add(t,t.model.get("order")),t._parent=this,this.view.triggerAll("element:child:add",this.view,!1),e.stopPropagation()}},removeChildView:function(e,t){t!==this.view&&(this.view.stopListening(t),this.view.children.remove(t,t.model.get("order")),this.view._updateIndices(t,!1),delete t._parent,t.$el.detach(),this.view.triggerAll("element:child:remove",this.view,!1),e.stopPropagation())},onCollapse:function(e,t){var i,n,o=this.view,r=o.$el.index();_.each(t,(function(e){i=this.view.children.findByModel(e),n=o.el.parentNode.children,i.$el.insertAfter(n[r]),r++,o.stopListening(i),o.children.remove(i),o._updateIndices(i,!1),delete i._parent,i.$el.trigger("container:add",i)}),this),o.$el.trigger("container:remove",o),o.destroy()}});e.exports=i},function(e,t){var i=Marionette.Behavior.extend({events:{dragover:"onDragOver",drop:"onDrop"},onDragOver:function(e){app.channel.trigger("canvas:dragover",e.originalEvent,this.view)},onDrop:function(e){app.channel.trigger("canvas:drop",e.originalEvent,this.view)}});e.exports=i},function(e,t){var i=Marionette.Behavior.extend({events:{mouseover:"onMouseOver",mouseout:"onMouseOut",click:"onClick"},modelEvents:{select:"selectElement"},collectionEvents:{edit:"onEdit"},onClick:function(e){e.shiftKey?this.editElement():this.selectElement(),e.preventDefault(),e.stopPropagation()},onMouseOver:function(e){this.view.$el.addClass("is-hovering"),e.stopPropagation()},onMouseOut:function(e){this.view.$el.removeClass("is-hovering"),e.stopPropagation()},editElement:function(){app.channel.trigger("modal:open",this.view.model)},selectElement:function(){app.channel.trigger("canvas:select",this.view)},onEdit:function(e,t){this.view.$el.toggleClass("is-editing",e===this.view.model&&t)}});e.exports=i},function(e,t){var i=Marionette.Behavior.extend({modelEvents:{"add:child":"addChild","remove:child":"removeChild","insert:before":"insertBefore","insert:after":"insertAfter",insert:"insert",append:"append",template:"template"},template:function(e){var t=this.view;t.model.createTemplate(e,t)},insert:function(e){e.trigger("append",this.view)},addChild:function(){this.view.$el.trigger("container:add",this.view)},removeChild:function(){this.view.$el.trigger("container:remove",this.view)},insertBefore:function(e){this.view.$el.insertBefore(e.$el)},insertAfter:function(e){this.view.$el.insertAfter(e.$el)},triggerEvent:function(e){e.$el.trigger("before:element:child:add",this.view)},append:function(e){var t=e.$childViewContainer?e.$childViewContainer:e.$el;this.view.$el.appendTo(t)}});e.exports=i},function(e,t){var i,n=Backbone.$,o=n(document);i=Marionette.Application.extend({onBeforeStart:function(){this.allowableEvents=["sidebar:initialize","canvas:dragstart","canvas:drag","canvas:dragend","template:load","modal:apply","sidebar:setting:change","canvas:reset","elements:reset"],this.addEventListeners(),window.location.origin===window.parent.location.origin?this.registerRemoteChannel():console.error("The Canvas has a different origin than the Sidebar")},addEventListeners:function(){var e=this;n("a").attr({draggable:!1,target:"_blank"}),n("img").attr({draggable:!1}),o.on("keydown",(function(t){if(!_.contains(["INPUT","SELECT","TEXTAREA"],t.target.tagName))if(t.ctrlKey)89==t.keyCode?e.channel.trigger("history:redo"):90==t.keyCode&&e.channel.trigger("history:undo");else if(t.metaKey&&90==t.keyCode)t.shiftKey?e.channel.trigger("history:redo"):e.channel.trigger("history:undo");else if(8==t.keyCode){var i=e.channel.request("canvas:element:selected");i&&(i.trigger("destroy",i),app.channel.trigger("element:delete",i))}}))},registerRemoteChannel:function(){var e=parent.app.channel;this.channel.reply("sidebar:library",(function(t){return e.request("sidebar:library",t)})),this.channel.reply("sidebar:device",(function(){return e.request("sidebar:device")})),this.channel.reply("sidebar:settings",(function(){return e.request("sidebar:settings")})),this.listenTo(e,"all",this.forwardRemoteEvent),e.trigger("canvas:handshake",this)},forwardRemoteEvent:function(e){_.contains(this.allowableEvents,e)&&this.channel.trigger.apply(this.channel,arguments)}}),e.exports=i},function(e,t){var i={render:[],destroy:[]},n=function(e,t,n){i.hasOwnProperty(e)&&"function"==typeof n&&(i[e][t]=i[e][t]||[],i[e][t].push(n))};window.app.listenTo(app.channel,"element:ready element:refresh",(function(e,t){var n=e.model,o=n.get("tag");t=t||n.get("atts"),i.render[o]&&_.each(i.render[o],(function(i){i.apply(e,[t,n])}))})),window.app.listenTo(app.channel,"element:destroy",(function(e){var t=e.model,n=t.get("tag");i.destroy[n]&&_.each(i.destroy[n],(function(i){i.apply(e,[t.get("atts"),t])}))})),e.exports={onRender:function(e,t){n("render",e,t)},onDestroy:function(e,t){n("destroy",e,t)}}},function(e,t){var i={addRule:function(e,t,i,n){"insertRule"in e?e.insertRule(t+" {"+i+"}",e.cssRules.length):"addRule"in e&&e.addRule(t,i,e.cssRules.length)},deleteRule:function(e,t){"deleteRule"in e?e.deleteRule(t):"removeRule"in e&&e.removeRule(t)},parseSelectors:function(e,t){if(_.isString(e))return e;var i=t?".tailor-"+t:"";return e.length?(e=e.map((function(e){if(e.indexOf("&")>-1)e=e.replace("&",i);else{var t=e.charAt(0);e=":"==t||"::"==t?i+e:i+" "+e}return".tailor-ui "+e}))).join(","):".tailor-ui "+i},parseDeclarations:function(e){if(_.isString(e))return e;var t="";return _.each(e,(function(e,i){t+=i+":"+e+";"})),t}};e.exports=i},function(e,t){var i,n=window.jQuery,o=window.Tailor.Components;i=o.create({getDefaults:function(){return{items:".tailor-carousel__item",prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"></button>',adaptiveHeight:!1,draggable:!1,speed:250,slidesToShow:1,slidesToScroll:1,initialSlide:0,autoplay:!1,autoplaySpeed:3e3,arrows:!1,dots:!1,fade:!1,infinite:!1}},onInitialize:function(){this.$wrap=this.$el.find(".tailor-carousel__wrap").first(),this.slickAt(0,this.addEventListeners)},slickAt:function(e,t){this.querySelectors();var i=this.$items.length;if(i){(e=Math.min(e,i-1))<this.options.slidesToShow&&(e=0);var n=this.$items[e];this.currentSlide=n.id,this.slick(t),this.updateDots(e)}},slick:function(e){var t=this,i=this.currentSlide,o=this.$dots.filter((function(){return this.getAttribute("data-id")==i})).index(),r=n.extend({},this.options,{autoplay:!1,autoplaySpeed:3e3,fade:!1,initialSlide:o});t.$wrap.slick(r).on("beforeChange",(function(e,i,n,o){i.$slider[0]==t.$wrap[0]&&n!=o&&t.updateDots(o)})),"function"==typeof e&&e.call(t)},refreshSlick:function(){this.$wrap.slick("refresh")},unSlick:function(){this.$wrap.slick("unslick")},querySelectors:function(){this.$dots&&this.$dots.off();var e=this;if(e.$items=e.$wrap.find(" > "+e.options.items),e.$dots=e.$el.children(".slick-dots").find(" > li"),e.$dots.on("click",(function(t){var i=n(t.currentTarget);e.currentSlide=i.data("id"),e.$wrap.slick("slickGoTo",i.index()),t.preventDefault()})),!e.currentSlide){var t=e.$items.filter((function(){return this.classList.contains("slick-current")}));e.currentSlide=t.length?t.id:e.$items[0].id}},updateDots:function(e){this.$dots.each((function(t,i){e==t?i.classList.add("slick-active"):i.classList.remove("slick-active")})),this.$dots.toggle(this.$dots.length/this.options.slidesToShow>1)},onMove:function(){this.refreshSlick()},onBeforeCopy:function(){this.unSlick()},onBeforeRefresh:function(){this.unSlick()},onRefresh:function(){this.refreshSlick()},onJSRefresh:function(){this.refreshSlick()},onChangeParent:function(){this.refreshSlick()},onDestroy:function(){this.unSlick()},onAddChild:function(){this.refreshSlick()},onRemoveChild:function(e,t){t.$el.detach(),this.refreshSlick()},onBeforeReadyChild:function(e,t){this.unSlick()},onReadyChild:function(e,t){this.slickAt(t.$el.index())},onBeforeReorderChild:function(){this.unSlick()},onReorderChild:function(e,t,i,n){this.querySelectors(),this.slickAt(i)},onBeforeRefreshChild:function(){this.unSlick()},onRefreshChild:function(e,t){this.slickAt(t.$el.index())},onBeforeJSRefreshChild:function(){this.unSlick()},onJSRefreshChild:function(e,t){this.slickAt(t.$el.index())},onBeforeDestroyChild:function(){this.unSlick()},onDestroyChild:function(e,t){var i=t.$el.index();t.$el.remove(),this.slickAt(i)},onAddDescendant:function(){this.refreshSlick()},onRemoveDescendant:function(){this.refreshSlick()},onReadyDescendant:function(){this.refreshSlick()},onRefreshDescendant:function(){this.refreshSlick()},onJSRefreshDescendant:function(){this.refreshSlick()},onDestroyDescendant:function(){this.refreshSlick()},onResize:function(){this.refreshSlick()}}),n.fn.tailorCarousel=function(e,t){return this.each((function(){n.data(this,"tailorCarousel")||n.data(this,"tailorCarousel",new i(this,e,t))}))}},function(e,t){var i,n=window.jQuery,o=window.Tailor.Components;i=o.create({slickActive:!1,getDefaults:function(){return{items:".tailor-carousel__item",prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"></button>',adaptiveHeight:!0,draggable:!1,speed:250,slidesToShow:1,slidesToScroll:1,autoplay:!1,autoplaySpeed:3e3,arrows:!1,dots:!0,fade:!1}},onInitialize:function(){this.$wrap=this.$el.find(".tailor-carousel__wrap").first(),this.slick()},slick:function(){var e=this;e.$el.imagesLoaded((function(){e.$wrap.slick(e.options),e.slickActive=!0}))},refreshSlick:function(){this.$wrap.slick("refresh")},unSlick:function(){this.$wrap.slick("unslick")},onMove:function(){this.slickActive&&this.refreshSlick()},onBeforeCopy:function(){this.slickActive&&this.unSlick()},onCopy:function(){this.slickActive||this.slick()},onBeforeRefresh:function(){this.slickActive&&this.unSlick()},onChangeParent:function(){this.refreshSlick()},onDestroy:function(){this.slickActive&&this.unSlick()},onResize:function(){this.slickActive&&this.refreshSlick()}}),n.fn.tailorSimpleCarousel=function(e,t){return this.each((function(){n.data(this,"tailorSimpleCarousel")||n.data(this,"tailorSimpleCarousel",new i(this,e,t))}))}},function(e,t){var i=Backbone.Marionette.Region.extend({initialize:function(){this.listenTo(app.channel,"canvas:dragstart",this.onDragStart),this.listenTo(app.channel,"canvas:dragend",this.onDragEnd)},onDragStart:function(e,t,i){this.el.classList.add("is-active")},onDragEnd:function(e,t,i){this.el.classList.remove("is-active")}});e.exports=i},function(e,t){var i=Backbone.Marionette.Region.extend({onShow:function(e,t,i){e._view.el.classList.add("is-selected")},onEmpty:function(e,t,i){e._view.el.classList.remove("is-selected")}});e.exports=i},function(e,t,i){i(37),i(38),i(39)},function(e,t){window.tailorValidateString=function(e){return e.replace(/[0-9]/g,"")},window.tailorValidateNumber=function(e){return e=e.replace(/[^0-9,.]+/i,""),_.isEmpty(e)?"0":e},window.tailorValidateColor=function(e){return/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(e)||function(e){return/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/.test(e)}(e)?e:""},window.tailorValidateUnit=function(e){var t="";return"-"==e.charAt(0)&&(t="-",e=e.substring(1)),t+tailorValidateNumber(e)+function(e){var t=e.match(new RegExp(["px","%","in","cm","mm","pt","pc","em","rem","ex","vw","vh"].join("|")));if(t)return t[0];return"px"}(e)}},function(e,t){var i,n;i=window.jQuery,window.app,window.Tailor.Api.Setting,(n=window.Tailor.Api.Element).onRender("tailor_carousel",(function(e,t){var i={autoplay:"1"==e.autoplay,autoplaySpeed:e.autoplay_speed,arrows:"1"==e.arrows,dots:!1,fade:"1"==e.fade&&"1"==e.items_per_row,slidesToShow:parseInt(e.items_per_row,10)||1,adaptiveHeight:!0};this.$el.tailorCarousel(i)})),n.onRender("tailor_content",(function(e,t){this.$el.find(".is-lightbox-image").length>0&&this.$el.tailorLightbox({disableOn:function(){return $el.hasClass("is-selected")}})})),n.onRender("tailor_gallery",(function(e,t){var n,o=this.$el;"carousel"==e.layout?(n={autoplay:"1"==e.autoplay,autoplaySpeed:e.autoplay_speed,arrows:"1"==e.arrows,dots:"1"==e.dots,fade:"1"==e.fade&&"1"==e.items_per_row,infinite:!1,slidesToShow:parseInt(e.items_per_row,10)||2},o.tailorSimpleCarousel(n)):"slideshow"==e.layout?(n={autoplay:"1"==e.autoplay,autoplaySpeed:e.autoplay_speed,arrows:"1"==e.arrows,dots:!1,fade:!0,items:".tailor-slideshow__slide",adaptiveHeight:!0,draggable:!1,speed:250},"1"==e.thumbnails&&(n.customPaging=function(e,t){return'<img class="slick-thumbnail" src="'+i(e.$slides[t]).data("thumb")+'">'},n.dots=!0),o.tailorSlideshow(n)):e.masonry&&o.tailorMasonry(),this.el.classList.contains("is-lightbox-gallery")&&o.tailorLightbox({disableOn:function(){return o.hasClass("is-selected")}})})),n.onRender("tailor_map",(function(e,t){this.$el.tailorGoogleMap()})),n.onRender("tailor_posts",(function(e,t){var i,n=this.$el;"carousel"==e.layout?(i={autoplay:"1"==e.autoplay,autoplaySpeed:e.autoplay_speed,arrows:"1"==e.arrows,dots:"1"==e.dots,fade:"1"==e.fade&&"1"==e.items_per_row,infinite:!1,slidesToShow:parseInt(e.items_per_row,10)||2},this.$el.tailorSimpleCarousel(i)):e.masonry&&n.tailorMasonry()})),n.onRender("tailor_section",(function(e,t){e.background_image&&e.parallax&&1==e.parallax&&this.$el.tailorParallax()})),n.onRender("tailor_tabs",(function(e,t){this.$el.tailorTabs()})),n.onRender("tailor_toggles",(function(e,t){this.$el.tailorToggles()}))},function(e,t){var i=Backbone.$,n=i(window);!function(e,t,o){var r=e._pageRules||[],a={_tailor_section_width:"",_tailor_column_spacing:"",_tailor_element_spacing:"",_tailor_page_css:""},s=document.createElement("style");function l(e){var t="";return _.each(["_tablet","_mobile"],(function(i){e.substring(e.length-i.length)==i&&(t=i.substring(1))})),t}function d(e,t){a[e]="",t=_.isString(t)?t.trim():t,_.isEmpty(t)||_.each(r[e],(function(i){var n=Tailor.CSS.parseSelectors(i.selectors),o=Tailor.CSS.parseDeclarations(i.declarations).replace(/\{\{(.*?)\}\}/g,t);a[e]+="\n"+n+" {"+o+"}"}))}function c(){var e="";for(var t in a)a.hasOwnProperty(t)&&(e+=a[t]);s.innerHTML=e,n.trigger("resize")}s.appendChild(document.createTextNode("")),s.setAttribute("media","screen"),s.setAttribute("id","tailor-settings"),document.head.appendChild(s),t.channel.on("module:css:stylesheets:ready",(function(n){var s=t.channel.request("sidebar:settings");s&&s.length&&s.each((function(e){var t=e.get("id"),i=e.get("value");i=_.isString(i)?i.trim():i,!_.isEmpty(i)&&a.hasOwnProperty(t)&&(r.hasOwnProperty(t)?d(t,i):a[t]=i)})),c();function h(t,i,n){return e.Tailor.Settings.overrides["*"].hasOwnProperty(i)?e.Tailor.Settings.overrides["*"][i]:e.Tailor.Settings.overrides.hasOwnProperty(t)&&e.Tailor.Settings.overrides[t].hasOwnProperty(i)?e.Tailor.Settings.overrides[t][i]:n}function u(t){_.each(t,(function(t,i){o.onChange("element:"+i,(function(n,o,r){if("function"==typeof(t=h(r.get("tag"),i,t)))return t.call(this,n,o,r);if(""==n)return[];var a={media:l(i),selectors:t[0],declarations:{}};return"function"==typeof e[t[2]]?a.declarations[t[1]]=e[t[2]](n):a.declarations[t[1]]=n,[a]}))}))}_.each(["_tailor_section_width","_tailor_column_spacing","_tailor_element_spacing"],(function(e){r.hasOwnProperty(e)&&o.onChange("sidebar:"+e,(function(t,i){d(e,t),c()}))})),o.onChange("sidebar:_tailor_page_css",(function(e,t){a._tailor_page_css=e,c()})),o.onChange("sidebar:_post_title",(function(e,t){i("h1, h2, h1 a, h2 a").each((function(){t==this.textContent&&(this.textContent=e)}))})),e.Tailor.Settings.overrides={"*":{},tailor_button:{color_hover:[[".tailor-button__inner:hover",".tailor-button__inner:focus"],"color","tailorValidateColor"],background_color:[[".tailor-button__inner"],"background-color","tailorValidateColor"],background_color_hover:[[".tailor-button__inner:hover",".tailor-button__inner:focus"],"background-color","tailorValidateColor"],border_color:[[".tailor-button__inner"],"border-color","tailorValidateColor"],border_color_hover:[[".tailor-button__inner:hover",".tailor-button__inner:focus"],"border-color","tailorValidateColor"],padding:[[".tailor-button__inner"],"padding-{0}","tailorValidateUnit"],padding_tablet:[[".tailor-button__inner"],"padding-{0}","tailorValidateUnit"],padding_mobile:[[".tailor-button__inner"],"padding-{0}","tailorValidateUnit"],margin:[[".tailor-button__inner"],"margin-{0}","tailorValidateUnit"],margin_tablet:[[".tailor-button__inner"],"margin-{0}","tailorValidateUnit"],margin_mobile:[[".tailor-button__inner"],"margin-{0}","tailorValidateUnit"],border_width:[[".tailor-button__inner"],"border-{0}-width","tailorValidateUnit"],border_width_tablet:[[".tailor-button__inner"],"border-{0}-width","tailorValidateUnit"],border_width_mobile:[[".tailor-button__inner"],"border-{0}-width","tailorValidateUnit"],border_radius:[[".tailor-button__inner"],"border-radius","tailorValidateUnit"],shadow:[[".tailor-button__inner"],"box-shadow"]},tailor_card:{border_color:[["",".tailor-card__header"],"border-color","tailorValidateColor"],padding:[[".tailor-card__content"],"padding-{0}","tailorValidateUnit"],padding_tablet:[[".tailor-card__content"],"padding-{0}","tailorValidateUnit"],padding_mobile:[[".tailor-card__content"],"padding-{0}","tailorValidateUnit"]},tailor_carousel:{border_color:[["",".slick-dots"],"border-color","tailorValidateColor"]},tailor_grid:{border_color:[[".tailor-grid__item"],"border-color","tailorValidateColor"],border_style:function(e,t,i){return[{selectors:["&.tailor-grid--bordered .tailor-grid__item"],declarations:{"border-style":tailorValidateString(e)+"!important"}}]},border_width:function(e,t,i){return[{selectors:[".tailor-grid__item"],declarations:{"border-width":tailorValidateUnit(e)}}]},border_width_tablet:function(e,t,i){return[{media:"tablet",selectors:[".tailor-grid__item"],declarations:{"border-width":tailorValidateUnit(e)}}]},border_width_mobile:function(e,t,i){return[{media:"mobile",selectors:[".tailor-grid__item"],declarations:{"border-width":tailorValidateUnit(e)}}]}},tailor_grid_item:{padding:[["&.tailor-grid__item"],"padding-{0}","tailorValidateUnit"],padding_tablet:[["&.tailor-grid__item"],"padding-{0}","tailorValidateUnit"],padding_mobile:[["&.tailor-grid__item"],"padding-{0}","tailorValidateUnit"]},tailor_tabs:{border_color:[[".tailor-tabs__navigation-item",".tailor-tab"],"border-color","tailorValidateColor"]},tailor_tab:{background_color:[["&.tailor-tabs__navigation-item","&.tailor-tab"],"background-color","tailorValidateColor"],padding:[["&.tailor-tab"],"padding-{0}","tailorValidateUnit"],padding_tablet:[["&.tailor-tab"],"padding-{0}","tailorValidateUnit"],padding_mobile:[["&.tailor-tab"],"padding-{0}","tailorValidateUnit"],border_width:[["&.tailor-tab"],"border-{0}-width","tailorValidateUnit"],border_width_tablet:[["&.tailor-tab"],"border-{0}-width","tailorValidateUnit"],border_width_mobile:[["&.tailor-tab"],"border-{0}-width","tailorValidateUnit"],background_repeat:[["&.tailor-tab"],"background-repeat","tailorValidateString"],background_position:[["&.tailor-tab"],"background-position","tailorValidateString"],background_size:[["&.tailor-tab"],"background-size","tailorValidateString"],background_attachment:[["&.tailor-tab"],"background-attachment","tailorValidateString"]},tailor_toggle:{border_color:[[".tailor-toggle__title",".tailor-toggle__body"],"border-color","tailorValidateColor"],border_style:[[".tailor-toggle__title",".tailor-toggle__body"],"border-style","tailorValidateString"],border_radius:[[".tailor-toggle__title",".tailor-toggle__body"],"border-radius","tailorValidateUnit"]},tailor_section:{max_width:[[".tailor-section__content"],"max-width","tailorValidateUnit"],max_width_tablet:[[".tailor-section__content"],"max-width","tailorValidateUnit"],max_width_mobile:[[".tailor-section__content"],"max-width","tailorValidateUnit"],min_height:[[".tailor-section__content"],"min-height","tailorValidateUnit"],min_height_tablet:[[".tailor-section__content"],"min-height","tailorValidateUnit"],min_height_mobile:[[".tailor-section__content"],"min-height","tailorValidateUnit"]}},_.each(["horizontal_alignment","horizontal_alignment_tablet","horizontal_alignment_mobile"],(function(e){o.onChange("element:"+e,(function(t,i,n){var o=l(e);if(""!=o&&(o="-"+o),i&&this.el.classList.remove("u-text-"+i+o),this.el.classList.add("u-text-"+t+o),"tailor_list_item"==n.get("tag")){var r=n.get("atts");return _.isEmpty(r.graphic_background_color)&&_.isEmpty(r.graphic_background_color_hover)?[{selectors:[".tailor-list__body"],declarations:{"padding-left":"0","padding-right":"0"}}]:[{selectors:[".tailor-list__body"],declarations:{"padding-left":"right"==t?"0":"1em","padding-right":"right"==t?"1em":"0"}}]}}))})),_.each(["vertical_alignment","vertical_alignment_tablet","vertical_alignment_mobile"],(function(e){o.onChange("element:"+e,(function(t,i,n){var o=l(e);""!==o&&(o="-"+o),i&&this.el.classList.remove("u-align-"+i+o),this.el.classList.add("u-align-"+t+o)}))})),_.each(["size","size_tablet","size_mobile"],(function(e){o.onChange("element:"+e,(function(t,i,n){if("tailor_button"==n.get("tag")){var o=l(e);""!=o&&(o="-"+o),i&&this.el.classList.remove("tailor-button--"+i+o),this.el.classList.add("tailor-button--"+t+o)}}))})),u({width:[[],"width","tailorValidateUnit"],width_tablet:[[],"width","tailorValidateUnit"],width_mobile:[[],"width","tailorValidateUnit"],max_width:[[],"max-width","tailorValidateUnit"],max_width_tablet:[[],"max-width","tailorValidateUnit"],max_width_mobile:[[],"max-width","tailorValidateUnit"],min_height:[[],"min-height","tailorValidateUnit"],min_height_tablet:[[],"min-height","tailorValidateUnit"],min_height_mobile:[[],"min-height","tailorValidateUnit"],min_item_height:[[".tailor-grid__item"],"min-height","tailorValidateUnit"]}),u({color:[[],"color","tailorValidateColor"],color_hover:[[":hover"],"color","tailorValidateColor"],link_color:[["a"],"color","tailorValidateColor"],link_color_hover:[["a:hover"],"color","tailorValidateColor"],heading_color:[["h1","h2","h3","h4","h5","h6"],"color","tailorValidateColor"],background_color:function(t,i,n){if(n.get("atts").background_image)return!1;var o=h(n.get("tag"),"background_color",[[],"background-color","tailorValidateColor"]);if("function"==typeof o)return o.call(this,t,i,n);var r={selectors:o[0],declarations:{}};return"function"==typeof e[o[2]]?r.declarations[o[1]]=e[o[2]](t):r.declarations[o[1]]=t,[r]},background_color_hover:[[":hover"],"background-color","tailorValidateColor"],border_color:[[],"border-color","tailorValidateColor"],border_color_hover:[[":hover"],"border-color","tailorValidateColor"],graphic_color:function(e,t,i){var n=i.get("tag");return"tailor_box"==n?[{selectors:[".tailor-box__graphic"],declarations:{color:tailorValidateColor(e)}}]:"tailor_list_item"==n?[{selectors:[".tailor-list__graphic"],declarations:{color:tailorValidateColor(e)}}]:void 0},graphic_color_hover:function(e,t,i){var n=i.get("tag");return"tailor_box"==n?[{selectors:[".tailor-box__graphic:hover"],declarations:{color:tailorValidateColor(e)}}]:"tailor_list_item"==n?[{selectors:[".tailor-list__graphic:hover"],declarations:{color:tailorValidateColor(e)}}]:void 0},graphic_background_color:function(e,t,i){var n=i.get("tag"),o=[];if("tailor_box"==n)e&&o.push({selectors:[".tailor-box__graphic"],declarations:{"margin-bottom":"1em","background-color":tailorValidateColor(e),"text-align":"center"}});else if("tailor_list_item"==n){var r=i.get("atts"),a=r.horizontal_alignment;e?(o.push({selectors:[".tailor-list__graphic"],declarations:{"background-color":tailorValidateColor(e),"text-align":"center"}}),o.push({selectors:[".tailor-list__body"],declarations:{"padding-left":"right"==a?"0":"1em","padding-right":"right"==a?"1em":"0"}})):_.isEmpty(r.graphic_background_color_hover)?o.push({selectors:[".tailor-list__body"],declarations:{"padding-left":"0","padding-right":"0"}}):o.push({selectors:[".tailor-list__body"],declarations:{"padding-left":"right"==a?"0":"1em","padding-right":"right"==a?"1em":"0"}})}return o},graphic_background_color_hover:function(e,t,i){var n=i.get("tag"),o=[];if("tailor_box"==n)e&&(o.push({selectors:[".tailor-box__graphic"],declarations:{"margin-bottom":"1em","text-align":"center"}}),o.push({selectors:[".tailor-box__graphic:hover"],declarations:{"background-color":tailorValidateColor(e)}}));else if("tailor_list_item"==n){var r=i.get("atts"),a=r.horizontal_alignment;e?(o.push({selectors:[".tailor-list__graphic"],declarations:{"text-align":"center"}}),o.push({selectors:[".tailor-list__body"],declarations:{"padding-left":"right"==a?"0":"1em","padding-right":"right"==a?"1em":"0"}}),o.push({selectors:[".tailor-list__graphic:hover"],declarations:{"background-color":tailorValidateColor(e)}})):_.isEmpty(r.graphic_background_color)?o.push({selectors:[".tailor-list__body"],declarations:{"padding-left":"0","padding-right":"0"}}):o.push({selectors:[".tailor-list__body"],declarations:{"padding-left":"right"==a?"0":"1em","padding-right":"right"==a?"1em":"0"}})}return o},title_color:[[".tailor-toggle__title"],"color","tailorValidateColor"],title_background_color:[[".tailor-toggle__title"],"background-color","tailorValidateColor"],navigation_color:function(e,t,i){return[{selectors:[".slick-active button:before"],declarations:{"background-color":tailorValidateColor(e)}},{selectors:[".slick-arrow:not( .slick-disabled )"],declarations:{color:tailorValidateColor(e)}}]}}),u({class:function(e,t,i){var n;if(!_.isEmpty(t))for(var o in n=t.trim().split(/\s+(?!$)/g))n.hasOwnProperty(o)&&this.el.classList.remove(n[o]);if(!_.isEmpty(e))for(var r in n=e.trim().split(/\s+(?!$)/g))n.hasOwnProperty(r)&&this.el.classList.add(n[r])},border_style:[[],"border-style","tailorValidateString"],border_radius:[[],"border-radius","tailorValidateUnit"],background_repeat:[[],"background-repeat","tailorValidateString"],background_position:[[],"background-position","tailorValidateString"],background_size:[[],"background-size","tailorValidateString"],background_attachment:[[],"background-attachment","tailorValidateString"],shadow:function(e,t,i){var n=h(i.get("tag"),"shadow",[[]]);return"function"==typeof n?n.call(this,e,t,i):1==e?[{selectors:n[0],declarations:{"box-shadow":"0 2px 6px rgba(0, 0, 0, 0.1)"}}]:[]}}),_.each({margin:[[],"margin-{0}","tailorValidateUnit"],margin_tablet:[[],"margin-{0}","tailorValidateUnit"],margin_mobile:[[],"margin-{0}","tailorValidateUnit"],padding:[[],"padding-{0}","tailorValidateUnit"],padding_tablet:[[],"padding-{0}","tailorValidateUnit"],padding_mobile:[[],"padding-{0}","tailorValidateUnit"],border_width:[[],"border-{0}-width","tailorValidateUnit"],border_width_tablet:[[],"border-{0}-width","tailorValidateUnit"],border_width_mobile:[[],"border-{0}-width","tailorValidateUnit"]},(function(t,i){o.onChange("element:"+i,(function(n,o,r){if("function"==typeof(t=h(r.get("tag"),i,t)))return t.call(this,n,o,r);var a,s,d=[],c={media:l(i),selectors:t[0],declarations:{}};return _.each(s=2==(s=-1!=(a=n).indexOf(",")?a.split(","):a.split("-")).length?_.object(["top","bottom"],s):4==s.length?_.object(["top","right","bottom","left"],s):{},(function(i,n){"function"==typeof e[t[3]]?c.declarations[t[1].replace("{0}",n)]=e[t[2]](i):c.declarations[t[1].replace("{0}",n)]=i})),_.keys(c.declarations).length>0&&d.push(c),d}))}))}))}(window,window.app,window.Tailor.Api.Setting)},function(e,t,i){var n;n=i(19).extend({validTarget:function(e,t){return"tailor_section"==e.get("tag")&&!_.contains(["left","right","center"],t)}}),e.exports=n},function(e,t,i){var n;n=i(6).extend({validTarget:function(e,t){return"child"!=e.get("type")&&"tailor_section"!=e.get("tag")&&"center"!=t&&(_.contains(["top","bottom"],t)&&"tailor_column"!=e.get("tag"))}}),e.exports=n},function(e,t,i){var n;n=i(18).extend({validTarget:function(e,t){if(_.contains(["tailor_section","tailor_row"],e.get("tag"))||!_.contains(["left","right"],t))return!1;if("child"==e.get("type")&&e.get("tag")!=this.get("tag"))return!1;var i=this.collection.getSiblings(this);return e.get("parent")==this.get("parent")||i.length<6}}),e.exports=n},function(e,t,i){var n;n=i(18).extend({validTarget:function(e,t){return"tailor_section"!=e.get("tag")&&!_.contains(["top","bottom","center"],t)&&(this.collection.getParent(this).get("tag")!=e.get("tag")&&e.get("tag")==this.get("tag"))}}),e.exports=n},function(e,t,i){var n;n=i(6).extend({createTemplate:function(e,t){var i=t.el.classList.contains("is-editing");t.$el.removeClass("is-dragging is-hovering is-selected is-editing");var n=t.getChildViewContainer(t),o=n.contents().detach(),r=t.$el.find(".tailor-tabs__navigation"),a=r.children().detach();this.appendTemplate(e,t),n.append(o),r.append(a),i&&t.el.classList.add("is-editing")}}),e.exports=n},function(e,t,i){var n;n=i(6).extend({createTemplate:function(e,t){var i=t.el.classList.contains("is-editing");t.$el.removeClass("is-dragging is-hovering is-selected is-editing");var n=t.getChildViewContainer(t),o=n.contents().detach(),r=t.$el.find(".slick-dots").detach();this.appendTemplate(e,t),n.append(o),r.insertAfter(n),i&&t.el.classList.add("is-editing")}}),e.exports=n},function(e,t,i){var n;n=i(20).extend({validTarget:function(e,t,i){if(i<20)return!1;if("child"==e.get("type")||_.contains(["tailor_section","tailor_column"],e.get("tag"))||"center"==t)return!1;var n=this.collection.getParent(this);return"tailor_row"==e.get("tag")?"tailor_section"==n.get("tag")&&_.contains(["top","bottom"],t):"child"==n.get("type")&&"tailor_column"!=n.get("tag")?"container"!=e.get("type")&&!_.contains(["left","right"],t):!_.contains(["wrapper","child"],n.get("type"))||(_.contains(["top","bottom"],t)?_.contains(["tailor_section","tailor_column"],n.get("tag"))||!_.contains(["container","wrapper","child"],e.get("type")):"tailor_section"==n.get("tag")||_.contains(["left","right"],t))},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.columnBefore),this.listenTo(this,"element:move:right",this.columnAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyColumnBefore),this.listenTo(this,"element:copy:right",this.copyColumnAfter),this.listenTo(this,"element:move:center",this.createChild),this.listenTo(this,"element:copy:center",this.copyChild)},copyBefore:function(e,t){var i=t.model.clone(),n=e.model.get("order")-1;i.set("id",i.cid),i.set("parent",e.model.get("parent")),i.set("order",n),this.copy(i.cid,t),this.collection.add(i)},copyAfter:function(e,t){var i=t.model.clone(),n=e.model.get("order");i.set("id",i.cid),i.set("parent",e.model.get("parent")),i.set("order",n),this.copy(i.cid,t),this.collection.add(i)},copyColumnBefore:function(e,t){var i=e.model,n=t.model.clone();if(n.set("id",n.cid),this.copy(n.cid,t),"tailor_column"===i.get("tag")){var o=this.collection.createColumn(i.get("parent"),i.get("order")-1);n.set("parent",o.get("id")),this.collection.add(n)}else{var r=this.collection.createRow(i.get("parent"),i.get("order"));this.collection.insertChild(i,_.last(r)),n.set("parent",_.first(r).get("id")),this.collection.add(n)}},copyColumnAfter:function(e,t){var i=e.model,n=t.model.clone();if(n.set("id",n.cid),this.copy(n.cid,t),"tailor_column"===i.get("tag")){var o=this.collection.createColumn(i.get("parent"),i.get("order"));n.set("parent",o.get("id")),this.collection.add(n)}else{var r=this.collection.createRow(i.get("parent"),i.get("order"));this.collection.insertChild(i,_.first(r)),n.set("parent",_.last(r).get("id")),this.collection.add(n)}},createChild:function(e,t){var i=e.model.get("id"),n=e.model.get("child"),o=this.collection.where({parent:i,tag:n}).length;this.appendTemplate(t.model.get("id"),t),this.collection.createWrapper(n,i,o,t.model)},copyChild:function(e,t){var i=e.model.get("id"),n=e.model.get("child"),o=this.collection.where({parent:i,tag:n}).length,r=this.collection.createWrapper(n,i,o,!1),a=t.model.clone();a.set("id",a.cid),a.set("parent",r.get("id")),a.set("order",0),this.copy(a.cid,t),this.collection.add(a)},copy:function(e,t){this.beforeCopyElement(e,t),this.createTemplate(e,t),this.afterCopyElement(e,t)},createTemplate:function(e,t){var i=t.el.classList.contains("is-editing");t.$el.removeClass("is-dragging is-hovering is-selected is-editing"),this.appendTemplate(e,t),i&&t.el.classList.add("is-editing")}}),e.exports=n},function(e,t,i){var n,o,r=window.jQuery,a=i(1);app.channel.on("module:css:stylesheets:ready",(function(e){o=e})),n=a.extend({ui:{sizer:".tailor-column__sizer"},events:{"mousedown @ui.sizer":"onResize"},modelEvents:{"change:atts":"onChangeAttributes","change:width":"onChangeWidth","change:setting":"onChangeSetting"},onRenderCollection:function(){void 0!==o&&this.updateCSS(this.model.get("id"),this.model.get("atts")),this.$el.attr("draggable",!0).prepend('<div class="tailor-column__helper"><div class="tailor-column__sizer"></div></div>')},onResize:function(e){var t=app.channel.request("sidebar:device"),i="desktop"==t?"width":"width_"+t,n=this.model,o=n.collection.findWhere({parent:n.get("parent"),order:n.get("order")+1}),a=n.get("atts"),s=o.get("atts"),l=parseFloat(a[i]||a.width),d=parseFloat(s[i]||s.width),c=l+d,h=this.el.getBoundingClientRect(),u=r('<span class="tailor-column__width tailor-column__width--right">'+l+"%</span>"),g=r('<span class="tailor-column__width tailor-column__width--left">'+d+"%</span>");function f(e){document.body.classList.add("is-resizing"),document.body.style.cursor="col-resize";var t=Math.min(c-10,Math.max(10,Math.round(10*parseFloat((e.clientX-h.left)/h.width*l))/10)),r=Math.round(10*parseFloat(c-t))/10;t+="%",r+="%",u.html(t),g.html(r);var a=_.clone(n.get("atts")),s=_.clone(o.get("atts"));a[i]=t,s[i]=r,n.set("atts",a,{silent:!0}),o.set("atts",s,{silent:!0}),n.trigger("change:width",n,a),o.trigger("change:width",o,s)}return u.prependTo(this.$el),g.prependTo(this.$el.next()),document.addEventListener("mousemove",f,!1),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",f,!1),document.removeEventListener("mouseup",e,!1),document.body.classList.remove("is-resizing"),document.body.style.cursor="default",u.remove(),g.remove();var t=n.get("atts");l!=t[i]&&app.channel.trigger("element:resize",n)}),!1),app.channel.trigger("canvas:reset"),!1},onChangeWidth:function(e,t){this.updateCSS(e.get("id"),t),this.triggerAll("element:refresh",this)},updateCSS:function(e,t){var i={},n=t.width,r=t.width_tablet||t.width,a=t.width_mobile||t.width;i.desktop={},i.desktop[e]=[{selectors:[],declarations:{width:n},setting:"width"}],i.tablet={},i.tablet[e]=[{selectors:[".mobile-columns &",".tablet-columns &"],declarations:{width:r},setting:"width_tablet"}],i.mobile={},i.mobile[e]=[{selectors:[".mobile-columns &"],declarations:{width:a},setting:"width_mobile"}],o.deleteRules(e,"width"),o.deleteRules(e,"width_tablet"),o.deleteRules(e,"width_mobile"),o.addRules(i)}}),e.exports=n},function(e,t,i){var n;n=i(1).extend({onRenderTemplate:function(){this.el.draggable=!1,this.el.id=this.model.cid}}),e.exports=n},function(e,t,i){var n;n=i(1).extend({onRenderTemplate:function(){this.el.draggable=!1,this.el.id=this.model.cid}}),e.exports=n},function(e,t,i){var n,o=i(1),r=i(51);n=o.extend({ui:{navigation:".tailor-tabs__navigation"},onBeforeRenderTemplate:function(){this.navigation&&this.navigation.triggerMethod("destroy")},onRenderTemplate:function(){this.navigation=new r({el:this.ui.navigation,model:this.model,collection:this.collection,sort:!1}),this.navigation.render()},childRefreshed:function(e){e.el.id=e.model.cid,e.el.classList.add("is-active"),this.triggerAll("element:child:refresh",e)},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this),this.navigation.triggerMethod("destroy")}}),e.exports=n},function(e,t,i){e.exports=Marionette.CollectionView.extend({childView:i(52),events:{dragstart:"onDragStart"},onDragStart:function(e){app.channel.trigger("canvas:reset"),e.stopPropagation()},buildChildView:function(e,t,i){return new t(_.extend({model:e,collection:this.collection},i))},filter:function(e,t,i){return e.get("parent")===this.model.get("id")},onRender:function(){var e=this;this.sortable=new Sortable(e.el,{draggable:"li",animation:150,onUpdate:function(t){var i=t.item.getAttribute("data-id");e.$el.trigger("before:navigation:reorder",[i,t.newIndex,t.oldIndex]),e.$el.trigger("navigation:reorder",[i,t.newIndex,t.oldIndex]),app.channel.trigger("navigation:reorder",e.model)}})},onBeforeDestroy:function(){this.sortable.destroy()}})},function(e,t){e.exports=Marionette.ItemView.extend({tagName:"li",className:function(){return"tailor-tabs__navigation-item tailor-"+this.model.get("id")},modelEvents:{"change:atts":"onChangeAttributes"},attributes:function(){return{"data-id":this.model.cid}},getTemplate:function(){return _.template('<%= title || "Tab" %>')},serializeData:function(){var e=Marionette.ItemView.prototype.serializeData.apply(this,arguments),t=this.model.get("atts");return e.title=t.title,e},onChangeAttributes:function(e,t){this.el.innerHTML=t.title||"Tab"}})},function(e,t,i){var n,o=i(1),r=i(54);n=o.extend({onBeforeRenderTemplate:function(){this.navigation&&this.navigation.triggerMethod("destroy")},onRenderTemplate:function(){this.navigation=new r({model:this.model,collection:this.collection,sort:!1}),this.$el.append(this.navigation.render().el)},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this),this.navigation.triggerMethod("destroy")}}),e.exports=n},function(e,t,i){e.exports=Marionette.CollectionView.extend({tagName:"ul",className:"slick-dots",childView:i(55),events:{dragstart:"onDragStart"},onDragStart:function(e){app.channel.trigger("canvas:reset"),e.stopPropagation()},onRender:function(){var e=this;this.sortable=new Sortable(e.el,{draggable:"li",animation:150,onUpdate:function(t){var i=t.item.getAttribute("data-id");e.$el.trigger("before:navigation:reorder",[i,t.newIndex,t.oldIndex]),e.$el.trigger("navigation:reorder",[i,t.newIndex,t.oldIndex]),app.channel.trigger("navigation:reorder",e.model)}})},buildChildView:function(e,t,i){return new t(_.extend({model:e,collection:this.collection},i))},filter:function(e,t,i){return e.get("parent")===this.model.get("id")},onBeforeDestroy:function(){this.sortable.destroy()}})},function(e,t){e.exports=Marionette.ItemView.extend({tagName:"li",attributes:function(){return{"data-id":this.model.cid}},getTemplate:function(){return _.template('<button data-role="none" role="button" aria-required="false" tabindex="0"></button>')}})},function(e,t){var i,n=window.jQuery;i=Marionette.ItemView.extend({className:"element",attributes:{draggable:!0},behaviors:{Draggable:{},Droppable:{},Editable:{},Movable:{}},modelEvents:{"change:atts":"onChangeAttributes","change:parent":"onChangeParent","change:setting":"onChangeSetting"},initialize:function(){this._isReady=!1,this._isBeingDestroyed=!1,this.addEventListeners()},addEventListeners:function(){this.listenTo(app.channel,"before:elements:restore",this.onBeforeDestroy)},getTemplateId:function(){return"tmpl-tailor-"+this.model.get("id")},getTemplate:function(){var e,t=document.querySelector("#"+this.getTemplateId());return t?(e=_.template(t.innerHTML),t.parentElement.removeChild(t)):(t=document.querySelector("#tmpl-tailor-"+this.model.get("tag")+"-default"),e=_.template(t.innerHTML)),e},attachElContent:function(e){var t=n(e)[0];return this.$el.replaceWith(t),this.setElement(t),this.el.setAttribute("draggable",!0),this.el.setAttribute("tailor-label",this.model.get("label")),this.el.classList.add("tailor-"+this.model.id),this.el.title=_l10n.edit_element,this},updateTemplate:function(e){var t=this.getTemplateId(),i=document.querySelector("#"+t);i||((i=document.createElement("script")).setAttribute("type","text/html"),i.id=t,document.body.appendChild(i)),i.innerHTML=e},onChangeAttributes:_.debounce((function(e,t){var i=this;e=e.toJSON(),t&&(e.atts=t),i.el.classList.add("is-rendering"),window.ajax.send("tailor_render",{data:{model:JSON.stringify(e),nonce:window._nonces.render},success:function(e){i.updateTemplate(e.html),app.channel.trigger("css:update",i.model.get("id"),e.css)},error:function(e){i.updateTemplate('<p class="tailor-notification tailor-notification--error">The template for '+i.cid+" could not be refreshed</p>"),console.error(e)},complete:function(){var t=i.$el.hasClass("is-editing"),n=i.$el.hasClass("is-selected");i.$el.removeClass("is-rendering"),i.triggerAll("before:element:refresh",i,e.atts),i.render(),i.triggerAll("element:refresh",i,e.atts),t&&i.$el.addClass("is-editing"),n&&i.$el.addClass("is-selected")}})}),500),onChangeSetting:function(e,t){t&&(this.triggerAll("before:element:jsRefresh",this,this.model.get("atts")),app.channel.trigger("element:setting:change",e,this),this.triggerAll("element:jsRefresh",this,this.model.get("atts")))},onChangeParent:function(){this.triggerAll("element:change:parent",this)},onBeforeRender:function(){this.triggerAll("before:element:ready",this)},onDomRefresh:function(){var e=this;this.$el.find("a").attr({draggable:!1,target:"_blank"}),this.$el.find("[onchange]").removeAttr("onchange"),this.$el.find("img").attr({draggable:!1}),this.$el.imagesLoaded((function(){if(e._isReady=!0,e.el.classList.contains("tailor-widget")&&0==e.$el.children().innerHeight()){var t=document.querySelector("#tmpl-tailor-element-empty");t&&e.$el.html(t.innerHTML)}e.triggerAll("element:ready",e)}))},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this)},onDestroy:function(){this.triggerAll("element:destroy",this)},triggerAll:function(e,t,i){this.$el.trigger(e,t),this.triggerMethod(e,t),i?app.channel.trigger(e,this,i):app.channel.trigger(e,this)}}),e.exports=i},function(e,t,i){var n,o=i(58);n=Marionette.Module.extend({onBeforeStart:function(e){this.stylesheets=[],this.collection=app.channel.request("canvas:elements"),this.createSheets(e.mediaQueries||{}),this.addRules(e.cssRules||{}),this.addEventListeners(),app.channel.trigger("module:css:ready",this)},addEventListeners:function(){this.listenTo(app.channel,"css:add",this.addRules),this.listenTo(app.channel,"css:delete",this.deleteRules),this.listenTo(app.channel,"css:update",this.updateRules),this.listenTo(app.channel,"css:copy",this.copyRules),this.listenTo(app.channel,"css:clear",this.clearRules),this.listenTo(this.collection,"destroy",this.onDestroy),app.channel.reply("canvas:css",this.getRules.bind(this))},getRules:function(){var e={};for(var t in this.stylesheets)this.stylesheets.hasOwnProperty(t)&&(e[t]=this.stylesheets[t].getAllRules());return e},createSheet:function(e,t,i){var n="only screen";return t&&(n+=" and (min-width: "+t+")"),i&&(n+=" and (max-width: "+i+")"),new o(e,n)},createSheets:function(e){_.each(e,(function(e,t){_.isEmpty(e.min)?_.isEmpty(e.max)?this.stylesheets[t]=this.createSheet(t):this.stylesheets[t]=this.createSheet(t,null,e.max):_.isEmpty(e.max)?this.stylesheets[t]=this.createSheet(t,e.min):(this.stylesheets[t+"-up"]=this.createSheet(t+"-up",e.min),this.stylesheets[t]=this.createSheet(t,e.min,e.max))}),this),app.channel.trigger("module:css:stylesheets:ready",this)},getSheet:function(e){return!!this.stylesheets.hasOwnProperty(e)&&this.stylesheets[e]},addRules:function(e){for(var t in e)e.hasOwnProperty(t)&&this.stylesheets.hasOwnProperty(t)&&this.stylesheets[t].addRules(e[t])},clearRules:function(){for(var e in this.stylesheets)this.stylesheets.hasOwnProperty(e)&&this.stylesheets[e].clearRules()},copyRules:function(e,t){for(var i in this.stylesheets)if(this.stylesheets.hasOwnProperty(i)){var n=this.stylesheets[i].getRules(e);if(n.length){for(var o in n)n.hasOwnProperty(o)&&(n[o].selectors=n[o].selectors.replace(new RegExp(e,"g"),t));var r={};r[i]={},r[i][t]=n,this.addRules(r)}}},deleteRules:function(e,t){for(var i in this.stylesheets)this.stylesheets.hasOwnProperty(i)&&this.stylesheets[i].deleteRules(e,t)},updateRules:function(e,t){this.deleteRules(e),this.addRules(t)},onReset:function(){this.clearRules()},onDestroy:function(e){this.deleteRules(e.get("id"))}}),e.exports=n},function(e,t){function i(e,t){this.id=e,this.initialize(t)}i.prototype={initialize:function(e){this.stylesheet=this.createStylesheet(e),this.sheet=this.stylesheet.sheet,this.lookup=[]},createStylesheet:function(e){var t=document.createElement("style");return t.appendChild(document.createTextNode("")),e=e||"screen",t.setAttribute("media",e),t.setAttribute("id","tailor-"+this.id),document.head.appendChild(t),t},addRules:function(e){for(var t in e)if(e.hasOwnProperty(t))for(var i in this.lookup=this.lookup||[],e[t])e[t].hasOwnProperty(i)&&this.addRule(t,e[t][i])},addRule:function(e,t){if(this.checkRule(t)){var i=Tailor.CSS.parseSelectors(t.selectors,e),n=Tailor.CSS.parseDeclarations(t.declarations);if(!_.isEmpty(n)){var o=t.setting;Tailor.CSS.addRule(this.sheet,i,n,this.lookup.length),this.lookup.push({elementId:e,settingId:o})}}},checkRule:function(e){return _.has(e,"selectors")&&_.has(e,"declarations")&&_.has(e,"setting")},getRules:function(e){for(var t=[],i=0;i<this.lookup.length;i++)if(_.has(this.lookup[i],"elementId")&&e==this.lookup[i].elementId){var n=this.sheet.cssRules[i];n.selectorText&&n.selectorText.indexOf(e)>-1&&t.push({selectors:n.selectorText,declarations:n.style.cssText,setting:this.lookup[i].settingId||""})}return t},getAllRules:function(){for(var e={},t=0;t<this.lookup.length;t++){var i=this.lookup[t].elementId,n=this.sheet.cssRules[t];e[i]=e[i]||[],e[i].push({selectors:n.selectorText,declarations:n.style.cssText,setting:this.lookup[t].settingId||""})}return e},deleteRules:function(e,t){for(var i=0;i<this.sheet.cssRules.length;i++)_.has(this.lookup[i],"elementId")&&e==this.lookup[i].elementId&&(_.isEmpty(t)||_.has(this.lookup[i],"settingId")&&t==this.lookup[i].settingId)&&(this.deleteRule(i),i--)},deleteRule:function(e){Tailor.CSS.deleteRule(this.sheet,e),this.lookup.splice(e,1)},clearRules:function(){for(var e=0;e<this.sheet.cssRules.length;e++)this.deleteRule(e),e--;this.lookup=[]}},e.exports=i},function(e,t,i){var n,o=Backbone.$,r=o("body"),a=o(window),s=i(60),l=jQuery('<div id="tailor-templates"></div>').appendTo(r);n=Marionette.Module.extend({onBeforeStart:function(e){var t=this;this.collection=new s(e.elements);var i=function(e){return e?t.collection.findWhere({id:e}):t.collection},n=function(e,i,n){e!==t.collection.models&&(l.append(i),app.channel.trigger("css:clear"),app.channel.trigger("before:elements:restore"),app.channel.trigger("canvas:reset"),t.collection.reset([]),t.collection.reset(e),app.channel.trigger("css:add",n),app.channel.trigger("elements:restore"),a.trigger("resize"))},o=function(){return t.collection.each((function(e){e.trigger("template",e.get("id"))})),l[0].innerHTML};app.channel.reply("canvas:elements",i),app.channel.reply("canvas:templates",o),app.channel.on("elements:reset",n)},onStart:function(){app.channel.trigger("module:elements:ready",this)}}),e.exports=n},function(e,t){var i=Backbone.Collection.extend({comparator:"order",model:function(e,t){return new(Tailor.lookup(e.tag,e.type,"Models"))(e,t)},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"change:parent",this.onChangeParent),this.listenTo(this,"add",this.onAdd),this.listenTo(this,"destroy",this.onDestroy),this.listenTo(this,"container:collapse",this.onCollapse),this.listenTo(this,"reset",this.onReset)},getElementDefinitions:function(){return this.library||app.channel.request("sidebar:library")},applyDefaults:function(e){e instanceof Backbone.Model&&(e=e.toJSON());var t=this.getElementDefinitions().findWhere({tag:e.tag}),i={label:t.get("label"),type:t.get("type")},n=t.get("child");n&&(i.child=n);var o=t.get("child_container");return o&&(i.child_container=o),e.atts=e.atts||{},_.each(t.get("settings"),(function(t){_.isEmpty(t.value)||e.atts.hasOwnProperty(t.id)||(e.atts[t.id]=t.value)})),_.extend(e,i)},getParent:function(e){return this.findWhere({id:e.get("parent")})},getChildren:function(e){return this.where({parent:e.get("id")})},getSiblings:function(e){return this.where({parent:e.get("parent")})},hasSelectedParent:function(e){var t=app.channel.request("canvas:element:selected");if(!t||e===t)return!1;for(var i=e.get("parent"),n=this.findWhere({id:i});void 0!==n;){if(t===n)return!0;i=n.get("parent"),n=this.get(i)}return!1},onChangeParent:function(e){var t=this.get(e.get("parent")),i=this.get(e.previous("parent"));this.sort({silent:!0}),this._checkParent(i),"tailor_column"===e.get("tag")&&(this._reBalanceColumns(t),this._reBalanceColumns(i))},onAdd:function(e,t,i){"tailor_column"==e.get("tag")&&this._reBalanceColumns(this.get(e.get("parent")))},onDestroy:function(e){var t=this.get(e.get("parent"));this._checkParent(t);var i=this.where({parent:e.get("id")});i.length&&_.each(i,(function(e){e.trigger("destroy",e,this)}),this),t&&"tailor_column"===e.get("tag")&&this._reBalanceColumns(t),0===this.length&&this.onEmpty()},onReset:function(){0===this.length&&this.onEmpty()},onEmpty:function(){var e=this.createSection(0);this.create([{tag:"tailor_content",atts:{},parent:e.get("id"),order:0}])},onCollapse:function(e,t){var i=e.get("parent");_.each(t,(function(e){e.set("parent",i)}),this)},add:function(e,t){return _.isArray(e)?_.each(e,this.applyDefaults.bind(this)):this.applyDefaults(e),this.set(e,_.extend({merge:!1},t,{add:!0,remove:!1}))},create:function(e,t){return t=t||{},this.add(e,t)},createSection:function(e){return _.first(this.create([{tag:"tailor_section",order:e}],{at:e}))},createRow:function(e,t){var i=_.first(this.create([{tag:"tailor_row",parent:e,order:t}],{}));return this.create([{tag:"tailor_column",atts:{width:"50%"},parent:i.get("id"),order:0},{tag:"tailor_column",atts:{width:"50%"},parent:i.get("id"),order:1}])},createColumn:function(e,t){return _.first(this.create([{tag:"tailor_column",parent:e,order:t}]))},createContainer:function(e,t,i,n){var o=e.get("tag"),r=_.first(this.create([{tag:o,parent:t,order:i}],{at:i,silent:!0})),a=e.get("child"),s=this.create([{tag:a,parent:r.get("id"),order:0},{tag:a,parent:r.get("id"),order:1}],{silent:!0});n&&(_.first(n).set("parent",_.first(s).get("id"),{silent:!0}),_.last(n).set("parent",_.last(s).get("id"),{silent:!0})),this.trigger("add",r,this,{})},createWrapper:function(e,t,i,n){var o=_.first(this.create([{tag:e,parent:t,order:i}],{silent:!0}));return void 0===n&&this.create([{tag:"tailor_content",parent:o.get("id"),order:0}],{silent:!0}),this.trigger("add",o,this,{}),void 0!==n&&this.insertChild(n,o),o},createChild:function(e){var t=_.first(this.create([{tag:e.get("child"),parent:e.get("id"),order:this.getChildren(e).length}],{silent:!0}));return this.create([{tag:"tailor_content",parent:t.get("id"),order:0}],{silent:!0}),this.trigger("add",t,this,{}),t},insertChild:function(e,t){e&&(e.get("parent")!==t.get("id")&&e.trigger("remove:child"),t.trigger("insert",e),e.trigger("add:child"),e.set("parent",t.get("id")))},_reBalanceColumns:function(e){var t=this.where({parent:e.get("id")}),i=t.length;_.each(t,(function(e){var t=_.clone(e.get("atts"));t.width=Math.round(1e3*parseFloat(1/i))/10+"%",delete t.width_tablet,delete t.width_mobile,e.set("atts",t,{silent:!0}),e.trigger("change:width",e,t)}),this)},_checkParent:function(e){e&&("container"==e.get("type")&&this._checkCollapsibleContainer(e),this._checkChildren(e))},_checkChildren:function(e){0===this.where({parent:e.get("id")}).length&&e.trigger("destroy",e)},_checkCollapsibleContainer:function(e){var t=this.getElementDefinitions().findWhere({tag:e.get("tag")}).get("child"),i=e.get("id"),n=this.filter((function(e){return i===e.get("parent")&&t===e.get("tag")}));if(0===n.length)e.trigger("container:collapse",e,this.where({parent:i}));else if(1===n.length){var o=_.first(n);"tailor_row"===e.get("tag")&&o.trigger("container:collapse",o,this.where({parent:o.get("id")}))}}});e.exports=i},function(e,t){var i,n=Backbone.$,o=n("body");n(window);i=Marionette.Module.extend({onStart:function(){var e=this;this.collection=app.channel.request("canvas:elements");var t=function(t,i,n){var r,a,s=app.canvasRegion.el;s.classList.add("is-loading"),window.ajax.send("tailor_load_template",{data:{template_id:t.get("id"),nonce:window._nonces.loadTemplate},success:function(e){r=e.models,a=e.templates,o.append(a),app.channel.trigger("css:add",e.css)},complete:function(){if(a){var o=[],l=[];_.each(r,(function(e){""==e.parent?o.push(e):l.push(e)})),e.collection.add(l,{silent:!0}),o.length>1?e.collection.add(o,{at:n+1}):(o[0].parent=i,o[0].order=n,e.collection.add(o)),app.channel.trigger("template:add",t)}s.classList.remove("is-loading")}})};app.channel.on("template:load",t),app.channel.trigger("module:templates:ready",this)}}),e.exports=i},function(e,t,i){var n,o=Backbone.$,r=o(window),a=o(document),s=i(63);n=Marionette.Module.extend({onStart:function(){this._model=null,this._isDragging=!1,this.collection=app.channel.request("canvas:elements"),this.addEventListeners(),this.showCanvas(),app.channel.trigger("module:canvas:ready",this)},addEventListeners:function(){this.listenTo(app.channel,"canvas:dragstart",this.onDragStart),this.listenTo(app.channel,"canvas:dragover",this.onDragOver),this.listenTo(app.channel,"canvas:dragend",this.onDragEnd),this.listenTo(app.channel,"canvas:drop",this.onDrop),a.on("click dragover",this.reset.bind(this)),r.on("resize",this.reset.bind(this))},showCanvas:function(){app.canvasRegion.show(new s({collection:this.collection}))},onDragStart:function(e,t){var i=t.model.collection;if("function"!=typeof i.hasSelectedParent||!i.hasSelectedParent(t.model)){if(this._view=t,this._model=t.model,this._isDragging=!0,t.el.classList.add("is-dragging"),"element"==t.model.get("collection"))if("setDragImage"in(window.DataTransfer||window.Clipboard).prototype){var n=document.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",e.dataTransfer.setDragImage(n,0,0)}e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("Text",this._model.cid),e.stopPropagation()}},onDragOver:function(e,t){if(this._isDragging){if(e.pageY){var i=window.scrollY||document.documentElement.scrollTop;e.pageY-i<40?window.scrollTo(0,i-20):i+window.innerHeight-e.pageY<40&&window.scrollTo(0,i+20)}var n="element"===this._model.get("collection")&&e.shiftKey?"copy":"move";if("move"===n&&t.model===this._model)return this.reset(),void e.stopPropagation();var o=this._getDropRegion(e,t);t.model.validTarget(this._model,o)&&(e.dataTransfer.dropEffect=n,app.channel.trigger("canvas:guide",t,o),e.preventDefault(),e.stopPropagation())}},onDrop:function(e,t){if(this._isDragging){var i=this._model,n=this._getDropRegion(e,t);if(t.model.validTarget(i,n)){var o;if("element"===i.get("collection")){if("move"===(o=e.shiftKey?"copy":"move")&&t.model===i)return}else o="add";i.trigger("element:"+o+":"+n,t,this._view),app.channel.trigger("element:"+o,i),this.collection.sort({silent:!0}),e.preventDefault(),e.stopPropagation()}}},onDragEnd:function(e,t){this._isDragging&&(this._isDragging=!1,this._view.el.classList.remove("is-dragging"),this.reset())},reset:function(){app.channel.trigger("canvas:reset")},_getPoint:function(e){return e.targetTouches?{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}:{x:e.clientX,y:e.clientY}},_getDropRegion:function(e,t){var i=this._getPoint(e),n=t.el.getBoundingClientRect(),o=n.width/2,r=n.height/2,a=n.top+(n.height-r)/2,s=n.left+(n.width-o)/2;if(s<=i.x&&i.x<=s+o&&a<=i.y&&i.y<=a+r)return"center";var l=(i.x-(n.left+o))/o,d=(i.y-(n.top+r))/r;return Math.abs(l)>Math.abs(d)?l>0?"right":"left":d>0?"bottom":"top"}}),e.exports=n},function(e,t){e.exports=Marionette.CollectionView.extend({behaviors:{Container:{}},getChildView:function(){return Tailor.lookup("tailor_section","wrapper","Views")},buildChildView:function(e,t,i){return new t(_.extend({model:e,collection:this.collection},i))},filter:function(e,t,i){return!e.get("parent")},_updateIndices:function(e,t,i){t&&(e._index=i,e.model._changing=!1,e.model.set("order",i)),this.children.each((function(i){i._index>=e._index&&(i._index+=t?1:-1,i.model.set("order",i._index))}),this)},triggerAll:function(e,t,i){this.$el.trigger(e,t),this.triggerMethod(e,t),i?app.channel.trigger(e,this,i):app.channel.trigger(e,this)}})},function(e,t,i){var n,o=i(65),r=i(66);n=Marionette.Module.extend({onStart:function(){var e=new o({el:"#guide"}).render(),t=function(t,i){e.position(t,i)},i=function(e){app.selectRegion.show(new r({model:e.model,collection:app.channel.request("canvas:elements"),view:e}))},n=function(){e.reset(),app.selectRegion.empty()},a=function(){var e=app.selectRegion.currentView;return e?e.model:null};this.listenTo(app.channel,"canvas:guide",t),this.listenTo(app.channel,"canvas:select",i),this.listenTo(app.channel,"canvas:reset",n),this.listenTo(app.channel,"element:refresh:template",n),app.channel.reply("canvas:element:selected",a),app.channel.trigger("module:tools:ready",this)}}),e.exports=n},function(e,t){var i=Marionette.ItemView.extend({template:!1,position:function(e,t){var i=e.$el,n=i.offset(),o=this.$el.offsetParent().offset();this.el.style.visibility="visible",this.el.className="guide guide--"+t+" guide--"+e.model.get("tag"),this.el.style.left=n.left-o.left+"px",this.el.style.top=n.top-o.top+"px",this.el.style.width=i.outerWidth()+"px",this.el.style.height=i.outerHeight()+"px",this.el.style.opacity=1},reset:function(){this.el.style="",this.el.style.visibility="hidden",this.el.style.opacity=0}});e.exports=i},function(e,t,i){var n,o=i(67);n=Marionette.CompositeView.extend({className:"select",childView:o,childViewContainer:".select__menu",ui:{add:".js-add",edit:".js-edit",copy:".js-copy",delete:".js-delete"},events:{"click @ui.add":"addElement","click @ui.edit":"editElement","click @ui.copy":"copyElement","click @ui.delete":"deleteElement"},modelEvents:{destroy:"destroy"},childEvents:{toggle:"toggleMenu"},template:"#tmpl-tailor-tools-select",serializeData:function(){var e=Backbone.Marionette.CompositeView.prototype.serializeData.apply(this,arguments);return e.type=this.model.get("type"),e.siblings=this.collection.where({parent:this.model.get("parent")}).length,e},initialize:function(e){this._view=e.view},_filteredSortedModels:function(){for(var e=[],t=this.model;void 0!==t;)e.push(t),t=this.collection.get(t.get("parent"));return e},onDomRefresh:function(){var e=this.el.parentNode.getBoundingClientRect(),t=this._view.el.getBoundingClientRect(),i=getComputedStyle(this._view.el,null),n=parseInt(i.getPropertyValue("border-top-width"),10),o=parseInt(i.getPropertyValue("border-right-width"),10),r=parseInt(i.getPropertyValue("border-bottom-width"),10),a=parseInt(i.getPropertyValue("border-left-width"),10),s=Math.round(parseFloat(t.left))+a,l=Math.min(window.innerWidth+1,Math.round(t.right)-o)-s;this.el.style.top=Math.round(parseFloat(t.top-parseFloat(e.top)))+n+"px",this.el.style.left=s-e.left+"px",this.el.style.width=l+"px",this.el.style.height=Math.round(parseFloat(t.height))-n-r+"px";var d=this.el.querySelector(".select__controls"),c=this.el.querySelector(".select__menu");if(c&&d){var h=c.getBoundingClientRect(),u=d.getBoundingClientRect();h.width+u.width>parseInt(this.el.style.width,10)&&this.el.classList.add("is-minimal")}},addElement:function(){var e=this.model.collection.createChild(this.model);e.set("collection","library",{silent:!0}),app.channel.trigger("element:add",e)},editElement:function(){app.channel.trigger("modal:open",this.model)},copyElement:function(){this.model.copyAfter(this._view,this._view),app.channel.trigger("element:copy",this.model)},deleteElement:function(){this.model.trigger("destroy",this.model),app.channel.trigger("element:delete",this.model)},toggleMenu:function(){this.$el.toggleClass("is-expanded")}}),e.exports=n},function(e,t){var i=Marionette.ItemView.extend({tagName:"div",className:"select__item",events:{click:"onClick"},getTemplate:function(){return _.template("<span><%= label %></span>")},onClick:function(e){0===this._index?this.triggerMethod("toggle"):this.model.trigger("select"),e.stopPropagation()}});e.exports=i}]);